2025-06-29 00:52:18.811 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 00:52:18.917 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 00:52:19.292 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:52:19.350 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:52:19.372 +02:00 [DBG] Created DbConnection. (20ms).
2025-06-29 00:52:19.374 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:19.377 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:19.568 +02:00 [DBG] An error occurred using the connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:19.578 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:52:19.579 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:52:19.579 +02:00 [DBG] Opening connection to database 'master' on server 'localhost,1433'.
2025-06-29 00:52:19.609 +02:00 [DBG] Opened connection to database 'master' on server 'localhost,1433'.
2025-06-29 00:52:19.611 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:19.614 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-29 00:52:19.615 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-06-29 00:52:19.617 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AuthDb];
2025-06-29 00:52:19.878 +02:00 [INF] Executed DbCommand (255ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AuthDb];
2025-06-29 00:52:19.879 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:19.879 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:19.879 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:19.879 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AuthDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-06-29 00:52:19.984 +02:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AuthDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-06-29 00:52:19.984 +02:00 [DBG] Closing connection to database 'master' on server 'localhost,1433'.
2025-06-29 00:52:19.989 +02:00 [DBG] Closed connection to database 'master' on server 'localhost,1433' (3ms).
2025-06-29 00:52:19.991 +02:00 [DBG] Disposing connection to database 'master' on server 'localhost,1433'.
2025-06-29 00:52:19.991 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-29 00:52:19.991 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.009 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.010 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.010 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.010 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.010 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:52:20.016 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:52:20.016 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.016 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:52:20.016 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.017 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.017 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 00:52:20.018 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:52:20.018 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.019 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.019 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 00:52:20.034 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 00:52:20.060 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 00:52:20.064 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 00:52:20.064 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.065 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.065 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.065 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 00:52:20.073 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 00:52:20.074 +02:00 [DBG] Committing transaction.
2025-06-29 00:52:20.079 +02:00 [DBG] Committed transaction.
2025-06-29 00:52:20.080 +02:00 [DBG] Disposing transaction.
2025-06-29 00:52:20.081 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 00:52:20.082 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 00:52:20.083 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.083 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.083 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.083 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:52:20.085 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:52:20.085 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:52:20.085 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.085 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.085 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 00:52:20.087 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 00:52:20.088 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:52:20.088 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:20.088 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:20.089 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 00:52:20.107 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 00:52:20.108 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.109 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 00:52:20.112 +02:00 [INF] Applying migration '20250627010142_InitialCreate'.
2025-06-29 00:52:20.122 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.122 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.122 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.122 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(50) NOT NULL,
    [PasswordHash] varbinary(max) NOT NULL,
    [PasswordSalt] varbinary(max) NOT NULL,
    [IsBlocked] bit NOT NULL DEFAULT CAST(0 AS bit),
    [Role] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-06-29 00:52:20.126 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(50) NOT NULL,
    [PasswordHash] varbinary(max) NOT NULL,
    [PasswordSalt] varbinary(max) NOT NULL,
    [IsBlocked] bit NOT NULL DEFAULT CAST(0 AS bit),
    [Role] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-06-29 00:52:20.126 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.126 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.126 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.127 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(256) NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-06-29 00:52:20.131 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(256) NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_RefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-06-29 00:52:20.132 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.132 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.132 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.132 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RefreshTokens_Token] ON [RefreshTokens] ([Token]);
2025-06-29 00:52:20.134 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_RefreshTokens_Token] ON [RefreshTokens] ([Token]);
2025-06-29 00:52:20.135 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.135 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.135 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.135 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshTokens_UserId] ON [RefreshTokens] ([UserId]);
2025-06-29 00:52:20.137 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshTokens_UserId] ON [RefreshTokens] ([UserId]);
2025-06-29 00:52:20.137 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.137 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.137 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Username] ON [Users] ([Username]);
2025-06-29 00:52:20.139 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Username] ON [Users] ([Username]);
2025-06-29 00:52:20.139 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:52:20.139 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.139 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:52:20.139 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250627010142_InitialCreate', N'9.0.6');
2025-06-29 00:52:20.155 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250627010142_InitialCreate', N'9.0.6');
2025-06-29 00:52:20.156 +02:00 [DBG] Committing transaction.
2025-06-29 00:52:20.158 +02:00 [DBG] Committed transaction.
2025-06-29 00:52:20.158 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:52:20.158 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.159 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:52:20.159 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 00:52:20.162 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 00:52:20.162 +02:00 [DBG] Disposing transaction.
2025-06-29 00:52:20.162 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:20.162 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:52:20.164 +02:00 [DBG] Hosting starting
2025-06-29 00:52:20.168 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 00:52:20.174 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 00:52:20.176 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 00:52:20.176 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 00:52:20.179 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 00:52:20.180 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 00:52:20.181 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 00:52:20.184 +02:00 [DBG] Considering key {735279f5-4f5d-44c9-b810-0e2c44a149c8} with expiration date 2025-04-17 13:14:27Z as default key.
2025-06-29 00:52:20.184 +02:00 [DBG] Key {735279f5-4f5d-44c9-b810-0e2c44a149c8} is no longer under consideration as default key because it is expired, revoked, or cannot be deciphered.
2025-06-29 00:52:20.186 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 00:52:20.187 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 00:52:20.187 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 00:52:20.188 +02:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-06-29 00:52:20.188 +02:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-06-29 00:52:20.190 +02:00 [INF] Creating key {7ac1136b-2533-4997-a668-f62a920e542f} with creation date 2025-06-28 22:52:20Z, activation date 2025-06-28 22:52:20Z, and expiration date 2025-09-26 22:52:20Z.
2025-06-29 00:52:20.191 +02:00 [DBG] Descriptor deserializer type for key {7ac1136b-2533-4997-a668-f62a920e542f} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-06-29 00:52:20.192 +02:00 [DBG] No key escrow sink found. Not writing key {7ac1136b-2533-4997-a668-f62a920e542f} to escrow.
2025-06-29 00:52:20.192 +02:00 [WRN] No XML encryptor configured. Key {7ac1136b-2533-4997-a668-f62a920e542f} may be persisted to storage in unencrypted form.
2025-06-29 00:52:20.193 +02:00 [INF] Writing data to file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 00:52:20.193 +02:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-06-29 00:52:20.193 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 00:52:20.193 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 00:52:20.194 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 00:52:20.194 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 00:52:20.194 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 00:52:20.194 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 00:52:20.194 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 00:52:20.194 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 00:52:20.194 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 00:52:20.194 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 00:52:20.194 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 00:52:20.195 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 00:52:20.195 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 00:52:20.240 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 00:52:20.240 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 00:52:20.528 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 00:52:20.528 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 00:52:20.528 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 00:52:20.528 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 00:52:20.528 +02:00 [INF] Hosting environment: Development
2025-06-29 00:52:20.529 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 00:52:20.529 +02:00 [DBG] Hosting started
2025-06-29 00:52:26.780 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" accepted.
2025-06-29 00:52:26.781 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" started.
2025-06-29 00:52:26.859 +02:00 [DBG] Connection 0HNDMIPQ3K98T established using the following protocol: "Tls12"
2025-06-29 00:52:26.898 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/ - null null
2025-06-29 00:52:26.943 +02:00 [DBG] No candidates found for the request path '/'
2025-06-29 00:52:26.944 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.014 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/ - 301 0 null 116.5962ms
2025-06-29 00:52:27.365 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/index.html - null null
2025-06-29 00:52:27.367 +02:00 [DBG] No candidates found for the request path '/index.html'
2025-06-29 00:52:27.367 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.472 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/index.html - 200 null text/html;charset=utf-8 108.7554ms
2025-06-29 00:52:27.531 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/swagger-ui.css - null null
2025-06-29 00:52:27.532 +02:00 [DBG] No candidates found for the request path '/swagger-ui.css'
2025-06-29 00:52:27.533 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/swagger-ui-bundle.js - null null
2025-06-29 00:52:27.536 +02:00 [DBG] No candidates found for the request path '/swagger-ui-bundle.js'
2025-06-29 00:52:27.536 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/index.css - null null
2025-06-29 00:52:27.537 +02:00 [DBG] No candidates found for the request path '/index.css'
2025-06-29 00:52:27.537 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.538 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/swagger-ui-standalone-preset.js - null null
2025-06-29 00:52:27.539 +02:00 [DBG] No candidates found for the request path '/swagger-ui-standalone-preset.js'
2025-06-29 00:52:27.539 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.539 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/index.js - null null
2025-06-29 00:52:27.540 +02:00 [DBG] No candidates found for the request path '/index.js'
2025-06-29 00:52:27.540 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.542 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/index.js - 200 null application/javascript;charset=utf-8 2.9388ms
2025-06-29 00:52:27.551 +02:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-06-29 00:52:27.551 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/index.css - 200 202 text/css 15.6403ms
2025-06-29 00:52:27.578 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-06-29 00:52:27.581 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-06-29 00:52:27.582 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/swagger-ui.css - 200 154949 text/css 51.4256ms
2025-06-29 00:52:27.582 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/swagger-ui-standalone-preset.js - 200 229223 text/javascript 43.8804ms
2025-06-29 00:52:27.599 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-06-29 00:52:27.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/swagger-ui-bundle.js - 200 1485241 text/javascript 63.7601ms
2025-06-29 00:52:27.698 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/swagger/v1/swagger.json - null null
2025-06-29 00:52:27.699 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-29 00:52:27.699 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.713 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/favicon-32x32.png - null null
2025-06-29 00:52:27.713 +02:00 [DBG] No candidates found for the request path '/favicon-32x32.png'
2025-06-29 00:52:27.713 +02:00 [DBG] Request did not match any endpoints
2025-06-29 00:52:27.714 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-29 00:52:27.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/favicon-32x32.png - 200 628 image/png 1.0595ms
2025-06-29 00:52:27.718 +02:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-29 00:52:27.718 +02:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-29 00:52:27.787 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.9051ms
2025-06-29 00:52:30.497 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" received FIN.
2025-06-29 00:52:30.500 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" is closed. The last processed stream ID was 17.
2025-06-29 00:52:30.500 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:52:30.501 +02:00 [DBG] The connection queue processing loop for 0HNDMIPQ3K98T completed.
2025-06-29 00:52:30.503 +02:00 [DBG] Connection id "0HNDMIPQ3K98T" stopped.
2025-06-29 00:52:36.682 +02:00 [DBG] Connection id "0HNDMIPQ3K98U" received FIN.
2025-06-29 00:52:36.682 +02:00 [DBG] Connection id "0HNDMIPQ3K98U" accepted.
2025-06-29 00:52:36.683 +02:00 [DBG] Connection id "0HNDMIPQ3K98U" started.
2025-06-29 00:52:36.683 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" accepted.
2025-06-29 00:52:36.683 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" started.
2025-06-29 00:52:36.685 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 00:52:36.692 +02:00 [DBG] Connection id "0HNDMIPQ3K98U" stopped.
2025-06-29 00:52:36.692 +02:00 [DBG] Connection id "0HNDMIPQ3K98U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:52:36.712 +02:00 [DBG] Connection 0HNDMIPQ3K98V established using the following protocol: "Tls12"
2025-06-29 00:52:36.715 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/register - application/json 53
2025-06-29 00:52:36.719 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-06-29 00:52:36.719 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-06-29 00:52:36.719 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2025-06-29 00:52:36.720 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:52:36.788 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 10:28:44', Current time (UTC): '28/06/2025 22:52:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 00:52:36.790 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 10:28:44', Current time (UTC): '28/06/2025 22:52:36'.
2025-06-29 00:52:36.792 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2025-06-29 00:52:36.809 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AuthApi.Models.UserDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:52:36.809 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:52:36.809 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:52:36.810 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:52:36.810 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:52:36.810 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:52:36.811 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:52:36.812 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:52:36.820 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.UserDto' ...
2025-06-29 00:52:36.821 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.UserDto' using the name '' in request data ...
2025-06-29 00:52:36.821 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 00:52:36.838 +02:00 [DBG] Connection id "0HNDMIPQ3K98V", Request id "0HNDMIPQ3K98V:00000001": started reading request body.
2025-06-29 00:52:36.838 +02:00 [DBG] Connection id "0HNDMIPQ3K98V", Request id "0HNDMIPQ3K98V:00000001": done reading request body.
2025-06-29 00:52:36.853 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.UserDto'
2025-06-29 00:52:36.853 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.UserDto'.
2025-06-29 00:52:36.853 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.UserDto'.
2025-06-29 00:52:36.853 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.UserDto' ...
2025-06-29 00:52:36.856 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.UserDto'.
2025-06-29 00:52:36.860 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Register (AuthApi) - Validation state: "Valid"
2025-06-29 00:52:36.877 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:52:36.923 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:36.970 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:36.973 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 00:52:36.976 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 00:52:36.984 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 00:52:37.047 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:52:37.047 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:52:37.048 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:37.050 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:37.054 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:52:37.054 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:37.058 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-06-29 00:52:37.060 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordSalt], [Role], [Username])
OUTPUT INSERTED.[Id], INSERTED.[IsBlocked]
VALUES (@p0, @p1, @p2, @p3);
2025-06-29 00:52:37.155 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 8000) (DbType = Binary), @p2='?' (Size = 4000), @p3='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordSalt], [Role], [Username])
OUTPUT INSERTED.[Id], INSERTED.[IsBlocked]
VALUES (@p0, @p1, @p2, @p3);
2025-06-29 00:52:37.164 +02:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:52:37.169 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:37.170 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 14ms reading results.
2025-06-29 00:52:37.171 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:37.172 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:52:37.181 +02:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:37.182 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 00:52:37.186 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Register (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 323.5797ms.
2025-06-29 00:52:37.189 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:52:37.191 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:52:37.191 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:52:37.191 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:52:37.191 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 00:52:37.191 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-29 00:52:37.209 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Register (AuthApi) in 396.138ms
2025-06-29 00:52:37.209 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2025-06-29 00:52:37.213 +02:00 [INF] HTTP POST /api/Auth/register responded 200 in 489.9419 ms
2025-06-29 00:52:37.214 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" completed keep alive response.
2025-06-29 00:52:37.216 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 00:52:37.219 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:37.220 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-29 00:52:37.220 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/register - 200 null application/json; charset=utf-8 505.4346ms
2025-06-29 00:52:43.623 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/login - application/json 53
2025-06-29 00:52:43.625 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-06-29 00:52:43.625 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-06-29 00:52:43.625 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:52:43.625 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:52:43.627 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 10:28:44', Current time (UTC): '28/06/2025 22:52:43'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 00:52:43.627 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 10:28:44', Current time (UTC): '28/06/2025 22:52:43'.
2025-06-29 00:52:43.628 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:52:43.631 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.Models.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:52:43.631 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:52:43.631 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:52:43.631 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:52:43.631 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:52:43.631 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:52:43.631 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:52:43.633 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:52:43.634 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 00:52:43.634 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' using the name '' in request data ...
2025-06-29 00:52:43.634 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 00:52:43.635 +02:00 [DBG] Connection id "0HNDMIPQ3K98V", Request id "0HNDMIPQ3K98V:00000002": started reading request body.
2025-06-29 00:52:43.635 +02:00 [DBG] Connection id "0HNDMIPQ3K98V", Request id "0HNDMIPQ3K98V:00000002": done reading request body.
2025-06-29 00:52:43.636 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.LoginDto'
2025-06-29 00:52:43.636 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:52:43.636 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:52:43.636 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 00:52:43.637 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:52:43.637 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Login (AuthApi) - Validation state: "Valid"
2025-06-29 00:52:43.685 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:52:43.717 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.Username == __username_0)'
2025-06-29 00:52:43.850 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(2);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(3);
                                    instance.<Role>k__BackingField = dataReader.GetString(4);
                                    instance.<Username>k__BackingField = dataReader.GetString(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 00:52:43.882 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:52:43.882 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:52:43.882 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.883 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.883 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:52:43.883 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:43.883 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:43.883 +02:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 00:52:43.917 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 00:52:43.924 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:43.925 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.925 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 8ms reading results.
2025-06-29 00:52:43.926 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.926 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:52:43.929 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:43.941 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:43.950 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:43.950 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 00:52:43.950 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 00:52:43.956 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 00:52:43.959 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.959 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.959 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:52:43.959 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:43.960 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:52:43.960 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 00:52:43.987 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 00:52:43.989 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:52:43.990 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.990 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 2ms reading results.
2025-06-29 00:52:43.990 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:43.990 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:52:43.991 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:52:43.991 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 00:52:44.000 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Login (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 362.61ms.
2025-06-29 00:52:44.000 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:52:44.000 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:52:44.000 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:52:44.000 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:52:44.000 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 00:52:44.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 00:52:44.003 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 371.0955ms
2025-06-29 00:52:44.003 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:52:44.003 +02:00 [INF] HTTP POST /api/Auth/login responded 200 in 377.5232 ms
2025-06-29 00:52:44.003 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" completed keep alive response.
2025-06-29 00:52:44.003 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 00:52:44.003 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:52:44.003 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-29 00:52:44.003 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/login - 200 null application/json; charset=utf-8 379.8822ms
2025-06-29 00:53:16.350 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:53:16.353 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:53:16.353 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:53:16.356 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:53:16.357 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:53:16.369 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:53:16.370 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:53:16.374 +02:00 [DBG] Authorization was successful.
2025-06-29 00:53:16.375 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:53:16.377 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:53:16.377 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:53:16.377 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:53:16.377 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:53:16.377 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:53:16.377 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:53:16.377 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:53:16.381 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:53:16.382 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:53:16.382 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.6805ms.
2025-06-29 00:53:16.385 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:53:16.386 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:53:16.386 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:53:16.386 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:53:16.386 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:53:16.386 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:53:16.386 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 9.3422ms
2025-06-29 00:53:16.387 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:53:16.387 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 30.0475 ms
2025-06-29 00:53:16.388 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" completed keep alive response.
2025-06-29 00:53:16.388 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 38.2291ms
2025-06-29 00:53:20.255 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - null null
2025-06-29 00:53:20.255 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/admin-data'
2025-06-29 00:53:20.255 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)' with route pattern 'api/Auth/admin-data' is valid for the request path '/api/Auth/admin-data'
2025-06-29 00:53:20.256 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)'
2025-06-29 00:53:20.256 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:53:20.257 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:53:20.257 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:53:20.259 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-06-29 00:53:20.261 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-06-29 00:53:20.262 +02:00 [INF] HTTP GET /api/Auth/admin-data responded 403 in 5.3810 ms
2025-06-29 00:53:20.262 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" completed keep alive response.
2025-06-29 00:53:20.262 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - 403 0 null 7.0981ms
2025-06-29 00:55:29.754 +02:00 [DBG] Connection id "0HNDMIPQ3K990" received FIN.
2025-06-29 00:55:29.759 +02:00 [DBG] Connection id "0HNDMIPQ3K990" accepted.
2025-06-29 00:55:29.760 +02:00 [DBG] Connection id "0HNDMIPQ3K990" started.
2025-06-29 00:55:29.762 +02:00 [DBG] Connection id "0HNDMIPQ3K991" accepted.
2025-06-29 00:55:29.762 +02:00 [DBG] Connection id "0HNDMIPQ3K991" started.
2025-06-29 00:55:29.763 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 00:55:29.765 +02:00 [DBG] Connection id "0HNDMIPQ3K990" stopped.
2025-06-29 00:55:29.765 +02:00 [DBG] Connection id "0HNDMIPQ3K990" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:55:29.788 +02:00 [DBG] Connection 0HNDMIPQ3K991 established using the following protocol: "Tls12"
2025-06-29 00:55:29.789 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - application/json 53
2025-06-29 00:55:29.790 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh'
2025-06-29 00:55:29.790 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)' with route pattern 'api/Auth/refresh' is valid for the request path '/api/Auth/refresh'
2025-06-29 00:55:29.790 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:55:29.791 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:55:29.792 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:55:29.792 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:55:29.792 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:55:29.800 +02:00 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(System.String) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:55:29.800 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:55:29.800 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:55:29.800 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:55:29.800 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:55:29.800 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:55:29.801 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:55:29.801 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:55:29.805 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-06-29 00:55:29.806 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name 'refreshToken' in request data ...
2025-06-29 00:55:29.807 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:55:29.807 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:55:29.807 +02:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-06-29 00:55:29.808 +02:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:55:29.808 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Refresh (AuthApi) - Validation state: "Valid"
2025-06-29 00:55:29.813 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:55:29.820 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Include(x => x.User)
    .SingleOrDefault(rt => rt.Token == __token_0)'
2025-06-29 00:55:29.830 +02:00 [DBG] Including navigation: 'RefreshToken.User'.
2025-06-29 00:55:29.879 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.Expires (DateTime) Required, 2], [Property: RefreshToken.Revoked (DateTime?), 3], [Property: RefreshToken.RevokedByIp (string), 4], [Property: RefreshToken.Token (string) Required Index MaxLength(256), 5], [Property: RefreshToken.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 8], [Property: User.PasswordHash (byte[]) Required, 9], [Property: User.PasswordSalt (byte[]) Required, 10], [Property: User.Role (string) Required, 11], [Property: User.Username (string) Required Index MaxLength(50), 12] }
            SELECT TOP(2) r.Id, r.Created, r.Expires, r.Revoked, r.RevokedByIp, r.Token, r.UserId, u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM RefreshTokens AS r
            INNER JOIN Users AS u ON r.UserId == u.Id
            WHERE r.Token == @__token_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.Expires (DateTime) Required, 2], [Property: RefreshToken.Revoked (DateTime?), 3], [Property: RefreshToken.RevokedByIp (string), 4], [Property: RefreshToken.Token (string) Required Index MaxLength(256), 5], [Property: RefreshToken.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 8], [Property: User.PasswordHash (byte[]) Required, 9], [Property: User.PasswordSalt (byte[]) Required, 10], [Property: User.Role (string) Required, 11], [Property: User.Username (string) Required Index MaxLength(50), 12] }
            SELECT TOP(2) r.Id, r.Created, r.Expires, r.Revoked, r.RevokedByIp, r.Token, r.UserId, u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM RefreshTokens AS r
            INNER JOIN Users AS u ON r.UserId == u.Id
            WHERE r.Token == @__token_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Created>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Expires>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Revoked>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<RevokedByIp>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Token>k__BackingField = dataReader.GetString(5);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                User instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(User);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(7) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (User)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(7);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(9);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(10);
                                    instance.<Role>k__BackingField = dataReader.GetString(11);
                                    instance.<Username>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<RefreshToken, RefreshToken, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: RefreshToken.User (User) ToPrincipal User Inverse: RefreshTokens | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.RefreshTokens (List<RefreshToken>) Collection ToDependent RefreshToken Inverse: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindNavigation("RefreshTokens")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<User>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, List<RefreshToken>, RefreshToken> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindNavigation("RefreshTokens").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 00:55:29.883 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:55:29.883 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:55:29.883 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.884 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.884 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:55:29.884 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:55:29.884 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:55:29.884 +02:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 00:55:29.953 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 00:55:29.956 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.958 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.958 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.958 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.959 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 5ms reading results.
2025-06-29 00:55:29.959 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.959 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:55:29.961 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.961 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.961 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.961 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 00:55:29.961 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 00:55:29.963 +02:00 [DBG] The unchanged property 'RefreshToken.Revoked' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:55:29.963 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:29.963 +02:00 [DBG] The unchanged property 'RefreshToken.RevokedByIp' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:55:29.963 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 00:55:29.971 +02:00 [DBG] Executing 2 update commands as a batch.
2025-06-29 00:55:29.973 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.973 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:29.973 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 00:55:29.976 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 00:55:29.977 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:55:29.977 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:55:29.977 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:55:29.977 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 256), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshTokens] SET [Revoked] = @p0, [RevokedByIp] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-06-29 00:55:30.016 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 256), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshTokens] SET [Revoked] = @p0, [RevokedByIp] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-06-29 00:55:30.017 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:55:30.018 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:30.018 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 00:55:30.019 +02:00 [DBG] Committing transaction.
2025-06-29 00:55:30.022 +02:00 [DBG] Committed transaction.
2025-06-29 00:55:30.023 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:30.023 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:55:30.024 +02:00 [DBG] Disposing transaction.
2025-06-29 00:55:30.024 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:30.025 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:55:30.025 +02:00 [DBG] SaveChanges completed for 'DataContext' with 2 entities written to the database.
2025-06-29 00:55:30.026 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Refresh (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 217.81ms.
2025-06-29 00:55:30.026 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:55:30.026 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:55:30.026 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:55:30.026 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:55:30.026 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 00:55:30.026 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 00:55:30.026 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Refresh (AuthApi) in 225.9152ms
2025-06-29 00:55:30.026 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:55:30.027 +02:00 [INF] HTTP POST /api/Auth/refresh responded 200 in 235.9469 ms
2025-06-29 00:55:30.027 +02:00 [DBG] Connection id "0HNDMIPQ3K991" completed keep alive response.
2025-06-29 00:55:30.027 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 00:55:30.027 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:55:30.027 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-29 00:55:30.027 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - 200 null application/json; charset=utf-8 237.4926ms
2025-06-29 00:55:30.028 +02:00 [DBG] Connection id "0HNDMIPQ3K991", Request id "0HNDMIPQ3K991:00000001": started reading request body.
2025-06-29 00:55:30.028 +02:00 [DBG] Connection id "0HNDMIPQ3K991", Request id "0HNDMIPQ3K991:00000001": done reading request body.
2025-06-29 00:55:30.521 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" disconnecting.
2025-06-29 00:55:30.522 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" stopped.
2025-06-29 00:55:30.522 +02:00 [DBG] Connection id "0HNDMIPQ3K98V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:55:38.038 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:55:38.039 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:55:38.039 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:55:38.039 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:55:38.039 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:55:38.040 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:55:38.040 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:55:38.040 +02:00 [DBG] Authorization was successful.
2025-06-29 00:55:38.041 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:55:38.041 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:55:38.041 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:55:38.041 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:55:38.041 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:55:38.041 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:55:38.041 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:55:38.041 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:55:38.041 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:55:38.041 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:55:38.041 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.049ms.
2025-06-29 00:55:38.042 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:55:38.042 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:55:38.042 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:55:38.042 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:55:38.042 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:55:38.042 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:55:38.042 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 0.976ms
2025-06-29 00:55:38.042 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:55:38.042 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 2.7943 ms
2025-06-29 00:55:38.042 +02:00 [DBG] Connection id "0HNDMIPQ3K991" completed keep alive response.
2025-06-29 00:55:38.042 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 4.3297ms
2025-06-29 00:56:05.936 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - application/json 53
2025-06-29 00:56:05.939 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh'
2025-06-29 00:56:05.939 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)' with route pattern 'api/Auth/refresh' is valid for the request path '/api/Auth/refresh'
2025-06-29 00:56:05.940 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:56:05.941 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:56:05.954 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:56:05.954 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:56:05.955 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:56:05.955 +02:00 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(System.String) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:56:05.956 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:56:05.956 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:56:05.956 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:56:05.956 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:56:05.956 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:56:05.956 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:56:05.958 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:56:05.961 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-06-29 00:56:05.962 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name 'refreshToken' in request data ...
2025-06-29 00:56:05.962 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:56:05.962 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:56:05.962 +02:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-06-29 00:56:05.962 +02:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-06-29 00:56:05.963 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Refresh (AuthApi) - Validation state: "Valid"
2025-06-29 00:56:05.964 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:56:05.968 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:56:05.968 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:56:05.968 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:05.969 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:05.970 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:56:05.970 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:56:05.970 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:56:05.970 +02:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 00:56:05.991 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 00:56:05.992 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:56:05.992 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:56:05.992 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:56:05.992 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:05.992 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 00:56:05.993 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:05.993 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:56:05.994 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Refresh (AuthApi) in 37.6506ms
2025-06-29 00:56:05.994 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 00:56:05.995 +02:00 [WRN] Refresh token expired for /api/Auth/refresh
AuthApi.Exceptions.RefreshTokenExpiredException: Refresh token has expired.
   at AuthApi.Services.Implementations.AuthService.RefreshTokenAsync(String token, String ipAddress) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Services/Implementations/AuthService.cs:line 63
   at AuthApi.Controllers.AuthController.Refresh(String refreshToken) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Controllers/AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at AuthApi.Middlewares.ExceptionLoggingMiddleware.InvokeAsync(HttpContext context) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Middlewares/ExceptionLoggingMiddleware.cs:line 22
2025-06-29 00:56:06.029 +02:00 [INF] HTTP POST /api/Auth/refresh responded 403 in 77.0772 ms
2025-06-29 00:56:06.029 +02:00 [DBG] Connection id "0HNDMIPQ3K991" completed keep alive response.
2025-06-29 00:56:06.029 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 00:56:06.029 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:06.030 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-29 00:56:06.030 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - 403 null application/json; charset=utf-8 93.8706ms
2025-06-29 00:56:06.030 +02:00 [DBG] Connection id "0HNDMIPQ3K991", Request id "0HNDMIPQ3K991:00000003": started reading request body.
2025-06-29 00:56:06.030 +02:00 [DBG] Connection id "0HNDMIPQ3K991", Request id "0HNDMIPQ3K991:00000003": done reading request body.
2025-06-29 00:56:43.639 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-06-29 00:56:43.641 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 00:56:43.642 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 00:56:50.271 +02:00 [INF] Application is shutting down...
2025-06-29 00:56:50.273 +02:00 [DBG] Hosting stopping
2025-06-29 00:56:50.281 +02:00 [DBG] Connection id "0HNDMIPQ3K991" disconnecting.
2025-06-29 00:56:50.281 +02:00 [DBG] Connection id "0HNDMIPQ3K991" stopped.
2025-06-29 00:56:50.281 +02:00 [DBG] Connection id "0HNDMIPQ3K991" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:56:50.286 +02:00 [DBG] Hosting stopped
2025-06-29 00:56:51.970 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 00:56:52.060 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 00:56:52.415 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:56:52.468 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:56:52.486 +02:00 [DBG] Created DbConnection. (16ms).
2025-06-29 00:56:52.489 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.491 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.683 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.692 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:56:52.704 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2025-06-29 00:56:52.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (13ms).
2025-06-29 00:56:52.718 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:56:52.762 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:56:52.764 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.777 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (7ms).
2025-06-29 00:56:52.778 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.779 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.780 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 00:56:52.782 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:56:52.782 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.782 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.783 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 00:56:52.829 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 00:56:52.866 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 00:56:52.872 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 00:56:52.873 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:56:52.873 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:56:52.874 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:56:52.874 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 00:56:52.879 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 00:56:52.880 +02:00 [DBG] Committing transaction.
2025-06-29 00:56:52.884 +02:00 [DBG] Committed transaction.
2025-06-29 00:56:52.885 +02:00 [DBG] Disposing transaction.
2025-06-29 00:56:52.886 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 00:56:52.888 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 00:56:52.889 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 00:56:52.889 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:56:52.889 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 00:56:52.889 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:56:52.891 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 00:56:52.892 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:56:52.892 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.892 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.892 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 00:56:52.894 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 00:56:52.895 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:56:52.895 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:56:52.895 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:56:52.895 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 00:56:52.903 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 00:56:52.905 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.905 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 00:56:52.908 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-29 00:56:52.908 +02:00 [DBG] Committing transaction.
2025-06-29 00:56:52.910 +02:00 [DBG] Committed transaction.
2025-06-29 00:56:52.910 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 00:56:52.910 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.910 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 00:56:52.910 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 00:56:52.916 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 00:56:52.916 +02:00 [DBG] Disposing transaction.
2025-06-29 00:56:52.917 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:56:52.917 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:56:52.919 +02:00 [DBG] Hosting starting
2025-06-29 00:56:52.923 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 00:56:52.930 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 00:56:52.931 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 00:56:52.932 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 00:56:52.932 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 00:56:52.934 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 00:56:52.937 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 00:56:52.937 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 00:56:52.937 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 00:56:52.940 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 00:56:52.942 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 00:56:52.942 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 00:56:52.942 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 00:56:52.943 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 00:56:52.943 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 00:56:52.990 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 00:56:52.990 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 00:56:53.274 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 00:56:53.274 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 00:56:53.274 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 00:56:53.274 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 00:56:53.274 +02:00 [INF] Hosting environment: Development
2025-06-29 00:56:53.274 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 00:56:53.274 +02:00 [DBG] Hosting started
2025-06-29 00:57:16.418 +02:00 [DBG] Connection id "0HNDMISGDQC53" received FIN.
2025-06-29 00:57:16.429 +02:00 [DBG] Connection id "0HNDMISGDQC53" accepted.
2025-06-29 00:57:16.430 +02:00 [DBG] Connection id "0HNDMISGDQC53" started.
2025-06-29 00:57:16.431 +02:00 [DBG] Connection id "0HNDMISGDQC54" accepted.
2025-06-29 00:57:16.431 +02:00 [DBG] Connection id "0HNDMISGDQC54" started.
2025-06-29 00:57:16.435 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 00:57:16.444 +02:00 [DBG] Connection id "0HNDMISGDQC53" stopped.
2025-06-29 00:57:16.445 +02:00 [DBG] Connection id "0HNDMISGDQC53" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 00:57:16.466 +02:00 [DBG] Connection 0HNDMISGDQC54 established using the following protocol: "Tls12"
2025-06-29 00:57:16.487 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/login - application/json 53
2025-06-29 00:57:16.501 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-06-29 00:57:16.503 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-06-29 00:57:16.504 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:57:16.520 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:57:16.585 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:57:16.586 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:57:16.588 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:57:16.601 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.Models.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:57:16.602 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:57:16.602 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:57:16.602 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:57:16.602 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:57:16.602 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:57:16.603 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:57:16.604 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:57:16.608 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 00:57:16.609 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' using the name '' in request data ...
2025-06-29 00:57:16.609 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 00:57:16.632 +02:00 [DBG] Connection id "0HNDMISGDQC54", Request id "0HNDMISGDQC54:00000001": started reading request body.
2025-06-29 00:57:16.633 +02:00 [DBG] Connection id "0HNDMISGDQC54", Request id "0HNDMISGDQC54:00000001": done reading request body.
2025-06-29 00:57:16.664 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.LoginDto'
2025-06-29 00:57:16.665 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:57:16.665 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:57:16.665 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 00:57:16.668 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 00:57:16.672 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Login (AuthApi) - Validation state: "Valid"
2025-06-29 00:57:16.709 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 00:57:16.765 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.Username == __username_0)'
2025-06-29 00:57:16.982 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(2);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(3);
                                    instance.<Role>k__BackingField = dataReader.GetString(4);
                                    instance.<Username>k__BackingField = dataReader.GetString(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 00:57:17.018 +02:00 [DBG] Creating DbConnection.
2025-06-29 00:57:17.019 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 00:57:17.020 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.022 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.023 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:57:17.023 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:57:17.026 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-29 00:57:17.029 +02:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 00:57:17.065 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 00:57:17.093 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:57:17.109 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.110 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 44ms reading results.
2025-06-29 00:57:17.111 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.111 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:57:17.135 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:57:17.157 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:57:17.165 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:57:17.167 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 00:57:17.169 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 00:57:17.183 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 00:57:17.229 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.229 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.231 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 00:57:17.231 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:57:17.231 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 00:57:17.232 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 00:57:17.245 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 00:57:17.252 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 00:57:17.255 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.255 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 10ms reading results.
2025-06-29 00:57:17.256 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.256 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 00:57:17.263 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 00:57:17.264 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 00:57:17.282 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Login (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 607.7798ms.
2025-06-29 00:57:17.288 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:57:17.291 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:57:17.291 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:57:17.291 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:57:17.291 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 00:57:17.291 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 00:57:17.307 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 701.5836ms
2025-06-29 00:57:17.308 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 00:57:17.313 +02:00 [INF] HTTP POST /api/Auth/login responded 200 in 789.3177 ms
2025-06-29 00:57:17.316 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:57:17.320 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 00:57:17.325 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 00:57:17.327 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-06-29 00:57:17.328 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/login - 200 null application/json; charset=utf-8 842.2502ms
2025-06-29 00:57:38.169 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:57:38.171 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:57:38.172 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:57:38.172 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:57:38.178 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:57:38.180 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:57:38.180 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:57:38.183 +02:00 [DBG] Authorization was successful.
2025-06-29 00:57:38.184 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:57:38.187 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:57:38.187 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:57:38.187 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:57:38.187 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:57:38.187 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:57:38.187 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:57:38.188 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:57:38.190 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:57:38.191 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:57:38.193 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.3311ms.
2025-06-29 00:57:38.195 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:57:38.195 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:57:38.195 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:57:38.195 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:57:38.195 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:57:38.195 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:57:38.196 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 8.937ms
2025-06-29 00:57:38.197 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:57:38.197 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 18.9465 ms
2025-06-29 00:57:38.197 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:57:38.198 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 29.4807ms
2025-06-29 00:58:19.383 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:58:19.384 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:58:19.385 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:58:19.386 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:19.389 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:58:19.393 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:58:19.393 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:58:19.397 +02:00 [DBG] Authorization was successful.
2025-06-29 00:58:19.398 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:19.398 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:58:19.398 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:58:19.398 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:58:19.399 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:58:19.399 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:58:19.399 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:58:19.399 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:19.401 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:19.401 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:58:19.402 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1164ms.
2025-06-29 00:58:19.402 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:58:19.402 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:58:19.402 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:58:19.402 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:58:19.402 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:58:19.402 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:58:19.402 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.6757ms
2025-06-29 00:58:19.402 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:19.403 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 13.7933 ms
2025-06-29 00:58:19.403 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:58:19.404 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 20.852ms
2025-06-29 00:58:20.859 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:58:20.860 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:58:20.861 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:58:20.862 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:20.862 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:58:20.863 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:58:20.863 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:58:20.864 +02:00 [DBG] Authorization was successful.
2025-06-29 00:58:20.864 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:20.864 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:58:20.864 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:58:20.864 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:58:20.864 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:58:20.864 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:58:20.864 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:58:20.864 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:20.865 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:20.865 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:58:20.865 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0085ms.
2025-06-29 00:58:20.865 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:58:20.865 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:58:20.865 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:58:20.865 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:58:20.865 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:58:20.865 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:58:20.866 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.0976ms
2025-06-29 00:58:20.866 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:20.866 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 3.7877 ms
2025-06-29 00:58:20.866 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:58:20.866 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 6.6129ms
2025-06-29 00:58:41.999 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:58:42.002 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:58:42.003 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:58:42.003 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:42.004 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:58:42.007 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:58:42.008 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:58:42.008 +02:00 [DBG] Authorization was successful.
2025-06-29 00:58:42.008 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:42.009 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:58:42.009 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:58:42.009 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:58:42.009 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:58:42.009 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:58:42.009 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:58:42.009 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:42.011 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:58:42.011 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:58:42.012 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1124ms.
2025-06-29 00:58:42.014 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:58:42.014 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:58:42.014 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:58:42.014 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:58:42.014 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:58:42.014 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:58:42.015 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 5.3038ms
2025-06-29 00:58:42.015 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:58:42.015 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 8.7926 ms
2025-06-29 00:58:42.015 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:58:42.017 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 21.2608ms
2025-06-29 00:59:18.966 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:59:18.967 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:59:18.968 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:59:18.968 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:18.969 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:59:18.974 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:59:18.974 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:59:18.975 +02:00 [DBG] Authorization was successful.
2025-06-29 00:59:18.975 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:18.975 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:59:18.976 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:59:18.976 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:59:18.976 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:59:18.976 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:59:18.976 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:59:18.976 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:18.977 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:18.977 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:59:18.978 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0856ms.
2025-06-29 00:59:18.978 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:59:18.978 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:59:18.978 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:59:18.979 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:59:18.979 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:59:18.980 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:59:18.981 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 5.3048ms
2025-06-29 00:59:18.981 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:18.981 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 11.8609 ms
2025-06-29 00:59:18.982 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:59:18.982 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 15.9442ms
2025-06-29 00:59:20.619 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:59:20.619 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:59:20.619 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:59:20.620 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:20.620 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:59:20.620 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:59:20.620 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:59:20.621 +02:00 [DBG] Authorization was successful.
2025-06-29 00:59:20.621 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:20.621 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:59:20.622 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:59:20.622 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:59:20.622 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:59:20.623 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:59:20.623 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:59:20.623 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:20.624 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:20.628 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:59:20.628 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0175ms.
2025-06-29 00:59:20.628 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:59:20.629 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:59:20.629 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:59:20.629 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:59:20.629 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:59:20.634 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:59:20.635 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 11.843ms
2025-06-29 00:59:20.635 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:20.635 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 14.8820 ms
2025-06-29 00:59:20.635 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:59:20.638 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 19.1342ms
2025-06-29 00:59:27.636 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 00:59:27.637 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 00:59:27.637 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 00:59:27.637 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:27.637 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 00:59:27.638 +02:00 [DBG] Successfully validated the token.
2025-06-29 00:59:27.638 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 00:59:27.638 +02:00 [DBG] Authorization was successful.
2025-06-29 00:59:27.638 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:27.638 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 00:59:27.639 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 00:59:27.639 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 00:59:27.639 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 00:59:27.639 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 00:59:27.639 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 00:59:27.639 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:27.640 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 00:59:27.640 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 00:59:27.640 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0086ms.
2025-06-29 00:59:27.643 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 00:59:27.643 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 00:59:27.643 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 00:59:27.650 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 00:59:27.650 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 00:59:27.650 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 00:59:27.650 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 10.5208ms
2025-06-29 00:59:27.650 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 00:59:27.650 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 12.3337 ms
2025-06-29 00:59:27.655 +02:00 [DBG] Connection id "0HNDMISGDQC54" completed keep alive response.
2025-06-29 00:59:27.655 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 18.317ms
2025-06-29 01:01:38.298 +02:00 [DBG] Connection id "0HNDMISGDQC54" disconnecting.
2025-06-29 01:01:38.301 +02:00 [DBG] Connection id "0HNDMISGDQC54" stopped.
2025-06-29 01:01:38.302 +02:00 [DBG] Connection id "0HNDMISGDQC54" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:05:29.177 +02:00 [INF] Application is shutting down...
2025-06-29 01:05:29.183 +02:00 [DBG] Hosting stopping
2025-06-29 01:05:29.198 +02:00 [DBG] Hosting stopped
2025-06-29 01:05:33.454 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 01:05:33.549 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 01:05:33.941 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 01:05:33.998 +02:00 [DBG] Creating DbConnection.
2025-06-29 01:05:34.015 +02:00 [DBG] Created DbConnection. (16ms).
2025-06-29 01:05:34.018 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.020 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.189 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.192 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:05:34.195 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-29 01:05:34.196 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-06-29 01:05:34.199 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:05:34.221 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:05:34.224 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.228 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (2ms).
2025-06-29 01:05:34.228 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.229 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.229 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 01:05:34.230 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:05:34.231 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.231 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.231 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 01:05:34.253 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 01:05:34.288 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 01:05:34.292 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 01:05:34.293 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:05:34.293 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:05:34.293 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:05:34.293 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 01:05:34.297 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 01:05:34.298 +02:00 [DBG] Committing transaction.
2025-06-29 01:05:34.300 +02:00 [DBG] Committed transaction.
2025-06-29 01:05:34.301 +02:00 [DBG] Disposing transaction.
2025-06-29 01:05:34.302 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 01:05:34.303 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 01:05:34.303 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:05:34.303 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:05:34.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:05:34.303 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:05:34.305 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:05:34.305 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:05:34.305 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.305 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.305 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 01:05:34.307 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 01:05:34.308 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:05:34.308 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:05:34.308 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:05:34.308 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 01:05:34.327 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 01:05:34.329 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.329 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 01:05:34.332 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-29 01:05:34.332 +02:00 [DBG] Committing transaction.
2025-06-29 01:05:34.335 +02:00 [DBG] Committed transaction.
2025-06-29 01:05:34.335 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:05:34.335 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:05:34.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 01:05:34.337 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 01:05:34.338 +02:00 [DBG] Disposing transaction.
2025-06-29 01:05:34.338 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:05:34.338 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 01:05:34.340 +02:00 [DBG] Hosting starting
2025-06-29 01:05:34.344 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 01:05:34.350 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 01:05:34.351 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 01:05:34.351 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 01:05:34.351 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 01:05:34.354 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 01:05:34.355 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 01:05:34.356 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 01:05:34.356 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 01:05:34.359 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 01:05:34.360 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 01:05:34.360 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 01:05:34.360 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 01:05:34.361 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 01:05:34.361 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 01:05:34.402 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 01:05:34.402 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 01:05:34.661 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 01:05:34.661 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 01:05:34.661 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 01:05:34.661 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 01:05:34.662 +02:00 [INF] Hosting environment: Development
2025-06-29 01:05:34.662 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 01:05:34.662 +02:00 [DBG] Hosting started
2025-06-29 01:07:33.478 +02:00 [DBG] Connection id "0HNDMJ28AIGNF" received FIN.
2025-06-29 01:07:33.490 +02:00 [DBG] Connection id "0HNDMJ28AIGNF" accepted.
2025-06-29 01:07:33.490 +02:00 [DBG] Connection id "0HNDMJ28AIGNF" started.
2025-06-29 01:07:33.491 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" accepted.
2025-06-29 01:07:33.491 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" started.
2025-06-29 01:07:33.497 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 01:07:33.506 +02:00 [DBG] Connection id "0HNDMJ28AIGNF" stopped.
2025-06-29 01:07:33.507 +02:00 [DBG] Connection id "0HNDMJ28AIGNF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:07:33.525 +02:00 [DBG] Connection 0HNDMJ28AIGNG established using the following protocol: "Tls12"
2025-06-29 01:07:33.548 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/login - application/json 53
2025-06-29 01:07:33.563 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-06-29 01:07:33.565 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-06-29 01:07:33.565 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:07:33.580 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:07:33.645 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 22:58:17', Current time (UTC): '28/06/2025 23:07:33'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 01:07:33.647 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 22:58:17', Current time (UTC): '28/06/2025 23:07:33'.
2025-06-29 01:07:33.648 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:07:33.662 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.Models.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:07:33.663 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:07:33.663 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:07:33.663 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:07:33.663 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:07:33.663 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:07:33.664 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:07:33.668 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:07:33.671 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 01:07:33.673 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' using the name '' in request data ...
2025-06-29 01:07:33.673 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 01:07:33.697 +02:00 [DBG] Connection id "0HNDMJ28AIGNG", Request id "0HNDMJ28AIGNG:00000001": started reading request body.
2025-06-29 01:07:33.697 +02:00 [DBG] Connection id "0HNDMJ28AIGNG", Request id "0HNDMJ28AIGNG:00000001": done reading request body.
2025-06-29 01:07:33.709 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.LoginDto'
2025-06-29 01:07:33.709 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:07:33.709 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:07:33.709 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 01:07:33.712 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:07:33.716 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Login (AuthApi) - Validation state: "Valid"
2025-06-29 01:07:33.752 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 01:07:33.789 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.Username == __username_0)'
2025-06-29 01:07:33.950 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(2);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(3);
                                    instance.<Role>k__BackingField = dataReader.GetString(4);
                                    instance.<Username>k__BackingField = dataReader.GetString(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 01:07:33.983 +02:00 [DBG] Creating DbConnection.
2025-06-29 01:07:33.983 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 01:07:33.984 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:33.987 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:33.987 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:07:33.987 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:07:33.991 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-29 01:07:33.993 +02:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 01:07:34.032 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 01:07:34.061 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:07:34.076 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.077 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 44ms reading results.
2025-06-29 01:07:34.078 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.078 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 01:07:34.100 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:07:34.121 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:07:34.130 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:07:34.133 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 01:07:34.135 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 01:07:34.148 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 01:07:34.199 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.200 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.202 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:07:34.202 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:07:34.202 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:07:34.203 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 01:07:34.220 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 01:07:34.227 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 01:07:34.230 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.231 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 10ms reading results.
2025-06-29 01:07:34.232 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.232 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 01:07:34.239 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:07:34.241 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 01:07:34.258 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Login (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 538.7465ms.
2025-06-29 01:07:34.264 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:07:34.266 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:07:34.266 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:07:34.266 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:07:34.267 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 01:07:34.267 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 01:07:34.282 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 615.6197ms
2025-06-29 01:07:34.283 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:07:34.287 +02:00 [INF] HTTP POST /api/Auth/login responded 200 in 703.8738 ms
2025-06-29 01:07:34.291 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" completed keep alive response.
2025-06-29 01:07:34.295 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 01:07:34.300 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:07:34.301 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-29 01:07:34.302 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/login - 200 null application/json; charset=utf-8 755.8171ms
2025-06-29 01:08:57.667 +02:00 [DBG] Connection id "0HNDMJ28AIGNH" received FIN.
2025-06-29 01:08:57.668 +02:00 [DBG] Connection id "0HNDMJ28AIGNH" accepted.
2025-06-29 01:08:57.669 +02:00 [DBG] Connection id "0HNDMJ28AIGNH" started.
2025-06-29 01:08:57.669 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" accepted.
2025-06-29 01:08:57.669 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" started.
2025-06-29 01:08:57.671 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 01:08:57.674 +02:00 [DBG] Connection id "0HNDMJ28AIGNH" stopped.
2025-06-29 01:08:57.674 +02:00 [DBG] Connection id "0HNDMJ28AIGNH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:08:57.705 +02:00 [DBG] Connection 0HNDMJ28AIGNI established using the following protocol: "Tls12"
2025-06-29 01:08:57.707 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:08:57.709 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:08:57.709 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:08:57.709 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:08:57.717 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:08:57.729 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:08:57.730 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:08:57.734 +02:00 [DBG] Authorization was successful.
2025-06-29 01:08:57.734 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:08:57.737 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:08:57.738 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:08:57.738 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:08:57.738 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:08:57.738 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:08:57.738 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:08:57.738 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:08:57.742 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:08:57.743 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:08:57.744 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.446ms.
2025-06-29 01:08:57.744 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:08:57.745 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:08:57.745 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:08:57.745 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:08:57.745 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:08:57.745 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:08:57.746 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 7.7904ms
2025-06-29 01:08:57.746 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:08:57.747 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 29.2330 ms
2025-06-29 01:08:57.747 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" completed keep alive response.
2025-06-29 01:08:57.747 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 40.0163ms
2025-06-29 01:09:25.069 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:09:25.073 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:09:25.075 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:09:25.076 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:09:25.080 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:09:25.083 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:09:25.084 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:09:25.085 +02:00 [DBG] Authorization was successful.
2025-06-29 01:09:25.085 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:09:25.086 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:09:25.086 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:09:25.086 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:09:25.086 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:09:25.086 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:09:25.086 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:09:25.086 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:09:25.088 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:09:25.089 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:09:25.089 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1013ms.
2025-06-29 01:09:25.090 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:09:25.090 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:09:25.090 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:09:25.090 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:09:25.090 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:09:25.090 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:09:25.091 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 4.6627ms
2025-06-29 01:09:25.091 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:09:25.091 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 10.7637 ms
2025-06-29 01:09:25.091 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" completed keep alive response.
2025-06-29 01:09:25.092 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 26.5252ms
2025-06-29 01:09:45.368 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" disconnecting.
2025-06-29 01:09:45.370 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" stopped.
2025-06-29 01:09:45.370 +02:00 [DBG] Connection id "0HNDMJ28AIGNG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:11:35.522 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" disconnecting.
2025-06-29 01:11:35.529 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" stopped.
2025-06-29 01:11:35.531 +02:00 [DBG] Connection id "0HNDMJ28AIGNI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:15:14.922 +02:00 [INF] Application is shutting down...
2025-06-29 01:15:14.928 +02:00 [DBG] Hosting stopping
2025-06-29 01:15:14.944 +02:00 [DBG] Hosting stopped
2025-06-29 01:15:17.683 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 01:15:17.782 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 01:15:18.131 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 01:15:18.187 +02:00 [DBG] Creating DbConnection.
2025-06-29 01:15:18.205 +02:00 [DBG] Created DbConnection. (16ms).
2025-06-29 01:15:18.207 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.209 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.366 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.369 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:15:18.372 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-29 01:15:18.373 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-06-29 01:15:18.376 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:15:18.398 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:15:18.400 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.405 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (2ms).
2025-06-29 01:15:18.406 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.406 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.407 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 01:15:18.408 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:15:18.408 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.408 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.409 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 01:15:18.428 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 01:15:18.462 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 01:15:18.467 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 01:15:18.467 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:15:18.467 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:15:18.468 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:15:18.468 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 01:15:18.470 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 01:15:18.471 +02:00 [DBG] Committing transaction.
2025-06-29 01:15:18.474 +02:00 [DBG] Committed transaction.
2025-06-29 01:15:18.474 +02:00 [DBG] Disposing transaction.
2025-06-29 01:15:18.475 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 01:15:18.476 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 01:15:18.477 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 01:15:18.477 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:15:18.477 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 01:15:18.477 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:15:18.478 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 01:15:18.479 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:15:18.479 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.479 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.479 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 01:15:18.485 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 01:15:18.487 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:15:18.487 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:15:18.487 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:15:18.490 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 01:15:18.498 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 01:15:18.500 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.500 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 01:15:18.504 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-29 01:15:18.504 +02:00 [DBG] Committing transaction.
2025-06-29 01:15:18.510 +02:00 [DBG] Committed transaction.
2025-06-29 01:15:18.511 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 01:15:18.511 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.511 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 01:15:18.511 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 01:15:18.520 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 01:15:18.520 +02:00 [DBG] Disposing transaction.
2025-06-29 01:15:18.520 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:18.523 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (2ms).
2025-06-29 01:15:18.525 +02:00 [DBG] Hosting starting
2025-06-29 01:15:18.530 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 01:15:18.537 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 01:15:18.538 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 01:15:18.539 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 01:15:18.539 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 01:15:18.542 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 01:15:18.544 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 01:15:18.544 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 01:15:18.544 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 01:15:18.547 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 01:15:18.548 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 01:15:18.549 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 01:15:18.549 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 01:15:18.550 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 01:15:18.550 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 01:15:18.592 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 01:15:18.592 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 01:15:18.902 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 01:15:18.902 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 01:15:18.903 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 01:15:18.903 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 01:15:18.903 +02:00 [INF] Hosting environment: Development
2025-06-29 01:15:18.903 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 01:15:18.903 +02:00 [DBG] Hosting started
2025-06-29 01:15:36.183 +02:00 [DBG] Connection id "0HNDMJ6O60EAT" received FIN.
2025-06-29 01:15:36.187 +02:00 [DBG] Connection id "0HNDMJ6O60EAT" accepted.
2025-06-29 01:15:36.188 +02:00 [DBG] Connection id "0HNDMJ6O60EAT" started.
2025-06-29 01:15:36.189 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" accepted.
2025-06-29 01:15:36.189 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" started.
2025-06-29 01:15:36.193 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 01:15:36.200 +02:00 [DBG] Connection id "0HNDMJ6O60EAT" stopped.
2025-06-29 01:15:36.201 +02:00 [DBG] Connection id "0HNDMJ6O60EAT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:15:36.222 +02:00 [DBG] Connection 0HNDMJ6O60EAU established using the following protocol: "Tls12"
2025-06-29 01:15:36.241 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:15:36.256 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:15:36.258 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:15:36.258 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:15:36.280 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:15:36.342 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:36'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 01:15:36.343 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:36'.
2025-06-29 01:15:36.345 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-06-29 01:15:36.346 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-29 01:15:36.351 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-29 01:15:36.352 +02:00 [INF] HTTP GET /api/Auth/secret responded 401 in 70.0533 ms
2025-06-29 01:15:36.357 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:15:36.358 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 401 0 null 117.8942ms
2025-06-29 01:15:45.761 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:15:45.763 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:15:45.763 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:15:45.763 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:15:45.764 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:15:45.766 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:45'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 01:15:45.767 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:45'.
2025-06-29 01:15:45.768 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-06-29 01:15:45.768 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-29 01:15:45.769 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-29 01:15:45.769 +02:00 [INF] HTTP GET /api/Auth/secret responded 401 in 4.5437 ms
2025-06-29 01:15:45.770 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:15:45.770 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 401 0 null 8.4388ms
2025-06-29 01:15:54.521 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/login - application/json 53
2025-06-29 01:15:54.522 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-06-29 01:15:54.522 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-06-29 01:15:54.522 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:15:54.522 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:15:54.523 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:54'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 01:15:54.523 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:08:34', Current time (UTC): '28/06/2025 23:15:54'.
2025-06-29 01:15:54.524 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:15:54.538 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.Models.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:15:54.538 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:15:54.538 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:15:54.539 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:15:54.539 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:15:54.539 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:15:54.539 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:15:54.541 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:15:54.543 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 01:15:54.544 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' using the name '' in request data ...
2025-06-29 01:15:54.545 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 01:15:54.569 +02:00 [DBG] Connection id "0HNDMJ6O60EAU", Request id "0HNDMJ6O60EAU:00000003": started reading request body.
2025-06-29 01:15:54.569 +02:00 [DBG] Connection id "0HNDMJ6O60EAU", Request id "0HNDMJ6O60EAU:00000003": done reading request body.
2025-06-29 01:15:54.581 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.LoginDto'
2025-06-29 01:15:54.581 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:15:54.581 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:15:54.581 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 01:15:54.584 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 01:15:54.587 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Login (AuthApi) - Validation state: "Valid"
2025-06-29 01:15:54.621 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 01:15:54.657 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.Username == __username_0)'
2025-06-29 01:15:54.807 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(2);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(3);
                                    instance.<Role>k__BackingField = dataReader.GetString(4);
                                    instance.<Username>k__BackingField = dataReader.GetString(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 01:15:54.840 +02:00 [DBG] Creating DbConnection.
2025-06-29 01:15:54.840 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 01:15:54.841 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:54.843 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:54.844 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:15:54.844 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:15:54.847 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-29 01:15:54.850 +02:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 01:15:54.882 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 01:15:54.909 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:15:54.928 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:54.929 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 46ms reading results.
2025-06-29 01:15:54.930 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:54.930 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 01:15:54.954 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:15:54.976 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:15:54.985 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:15:54.987 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 01:15:54.989 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 01:15:55.002 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 01:15:55.047 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:55.047 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:55.049 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 01:15:55.049 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:15:55.050 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 01:15:55.050 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 01:15:55.062 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 01:15:55.068 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 01:15:55.071 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:55.072 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 9ms reading results.
2025-06-29 01:15:55.072 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:55.072 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 01:15:55.079 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 01:15:55.081 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 01:15:55.097 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Login (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 507.2067ms.
2025-06-29 01:15:55.101 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:15:55.103 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:15:55.103 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:15:55.103 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:15:55.104 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 01:15:55.104 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 01:15:55.118 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 576.4955ms
2025-06-29 01:15:55.119 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 01:15:55.121 +02:00 [INF] HTTP POST /api/Auth/login responded 200 in 598.5143 ms
2025-06-29 01:15:55.123 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:15:55.126 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 01:15:55.131 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 01:15:55.133 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-29 01:15:55.134 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/login - 200 null application/json; charset=utf-8 612.8088ms
2025-06-29 01:16:19.377 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:16:19.378 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:16:19.379 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:16:19.379 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:19.379 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:16:19.392 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:16:19.393 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:16:19.394 +02:00 [DBG] Authorization was successful.
2025-06-29 01:16:19.395 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:19.401 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:16:19.401 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:16:19.401 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:16:19.402 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:16:19.402 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:16:19.402 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:16:19.402 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:19.404 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:19.405 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:16:19.409 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.5533ms.
2025-06-29 01:16:19.410 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:16:19.410 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:16:19.410 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:16:19.410 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:16:19.410 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:16:19.411 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:16:19.412 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 9.5202ms
2025-06-29 01:16:19.412 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:19.412 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 32.0646 ms
2025-06-29 01:16:19.412 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:16:19.412 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 35.1565ms
2025-06-29 01:16:36.113 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:16:36.114 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:16:36.114 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:16:36.114 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:36.115 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:16:36.117 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:16:36.117 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:16:36.117 +02:00 [DBG] Authorization was successful.
2025-06-29 01:16:36.118 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:36.118 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:16:36.118 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:16:36.118 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:16:36.118 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:16:36.118 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:16:36.118 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:16:36.118 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:36.122 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:36.122 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:16:36.122 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0424ms.
2025-06-29 01:16:36.122 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:16:36.123 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:16:36.123 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:16:36.123 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:16:36.123 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:16:36.123 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:16:36.123 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 4.4897ms
2025-06-29 01:16:36.123 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:36.123 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 7.7166 ms
2025-06-29 01:16:36.123 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:16:36.123 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 10.0943ms
2025-06-29 01:16:47.476 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:16:47.477 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:16:47.480 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:16:47.481 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:47.482 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:16:47.484 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:16:47.484 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:16:47.485 +02:00 [DBG] Authorization was successful.
2025-06-29 01:16:47.485 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:47.485 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:16:47.486 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:16:47.486 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:16:47.492 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:16:47.492 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:16:47.492 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:16:47.492 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:47.494 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:16:47.494 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:16:47.495 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0771ms.
2025-06-29 01:16:47.495 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:16:47.495 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:16:47.495 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:16:47.495 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:16:47.495 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:16:47.495 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:16:47.496 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.6585ms
2025-06-29 01:16:47.496 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:16:47.496 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 13.4530 ms
2025-06-29 01:16:47.496 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:16:47.498 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 22.479ms
2025-06-29 01:17:08.767 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:17:08.768 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:17:08.768 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:17:08.771 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:08.772 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:17:08.781 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:17:08.781 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:17:08.787 +02:00 [DBG] Authorization was successful.
2025-06-29 01:17:08.787 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:08.788 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:17:08.788 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:17:08.791 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:17:08.791 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:17:08.791 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:17:08.791 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:17:08.791 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:08.792 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:08.792 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:17:08.792 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0881ms.
2025-06-29 01:17:08.793 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:17:08.793 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:17:08.793 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:17:08.794 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:17:08.794 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:17:08.794 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:17:08.794 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.5019ms
2025-06-29 01:17:08.796 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:08.796 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 23.9539 ms
2025-06-29 01:17:08.796 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:17:08.796 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 29.3163ms
2025-06-29 01:17:10.248 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:17:10.249 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:17:10.249 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:17:10.249 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:10.250 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:17:10.250 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:17:10.250 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:17:10.250 +02:00 [DBG] Authorization was successful.
2025-06-29 01:17:10.250 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:10.251 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:17:10.251 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:17:10.251 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:17:10.251 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:17:10.251 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:17:10.251 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:17:10.252 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:10.252 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:10.252 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:17:10.252 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0169ms.
2025-06-29 01:17:10.253 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:17:10.253 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:17:10.253 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:17:10.253 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:17:10.253 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:17:10.253 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:17:10.253 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.3844ms
2025-06-29 01:17:10.253 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:10.253 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 3.3581 ms
2025-06-29 01:17:10.253 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:17:10.253 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 4.7514ms
2025-06-29 01:17:11.668 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:17:11.669 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:17:11.669 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:17:11.669 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:11.669 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:17:11.670 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:17:11.670 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:17:11.671 +02:00 [DBG] Authorization was successful.
2025-06-29 01:17:11.671 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:11.671 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:17:11.671 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:17:11.671 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:17:11.671 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:17:11.671 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:17:11.671 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:17:11.671 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:11.671 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:11.671 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:17:11.671 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0083ms.
2025-06-29 01:17:11.672 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:17:11.672 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:17:11.672 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:17:11.672 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:17:11.672 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:17:11.672 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:17:11.672 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 0.9409ms
2025-06-29 01:17:11.672 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:11.672 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 2.8595 ms
2025-06-29 01:17:11.672 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:17:11.672 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 3.9857ms
2025-06-29 01:17:16.686 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:17:16.687 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:17:16.688 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:17:16.688 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:16.688 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:17:16.689 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:17:16.689 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:17:16.690 +02:00 [DBG] Authorization was successful.
2025-06-29 01:17:16.690 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:16.690 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:17:16.690 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:17:16.691 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:17:16.691 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:17:16.691 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:17:16.691 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:17:16.691 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:16.692 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:17:16.692 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:17:16.692 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0083ms.
2025-06-29 01:17:16.692 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:17:16.692 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:17:16.692 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:17:16.693 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:17:16.693 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:17:16.693 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:17:16.693 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.4635ms
2025-06-29 01:17:16.693 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:17:16.693 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 4.9090 ms
2025-06-29 01:17:16.693 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" completed keep alive response.
2025-06-29 01:17:16.693 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 7.2878ms
2025-06-29 01:18:32.080 +02:00 [DBG] Connection id "0HNDMJ6O60EAV" received FIN.
2025-06-29 01:18:32.081 +02:00 [DBG] Connection id "0HNDMJ6O60EAV" accepted.
2025-06-29 01:18:32.081 +02:00 [DBG] Connection id "0HNDMJ6O60EAV" started.
2025-06-29 01:18:32.081 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" accepted.
2025-06-29 01:18:32.081 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" started.
2025-06-29 01:18:32.084 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 01:18:32.086 +02:00 [DBG] Connection id "0HNDMJ6O60EAV" stopped.
2025-06-29 01:18:32.086 +02:00 [DBG] Connection id "0HNDMJ6O60EAV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:18:32.113 +02:00 [DBG] Connection 0HNDMJ6O60EB0 established using the following protocol: "Tls12"
2025-06-29 01:18:32.115 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:18:32.115 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:18:32.115 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:18:32.115 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:32.116 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:18:32.117 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:18:32.117 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:18:32.117 +02:00 [DBG] Authorization was successful.
2025-06-29 01:18:32.117 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:32.117 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:18:32.118 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:18:32.118 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:18:32.118 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:18:32.118 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:18:32.118 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:18:32.118 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:32.118 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:32.119 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:18:32.119 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.081ms.
2025-06-29 01:18:32.119 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:18:32.119 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:18:32.119 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:18:32.119 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:18:32.119 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:18:32.119 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:18:32.120 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.6918ms
2025-06-29 01:18:32.120 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:32.120 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 3.7369 ms
2025-06-29 01:18:32.120 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" completed keep alive response.
2025-06-29 01:18:32.120 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 5.283ms
2025-06-29 01:18:33.014 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:18:33.014 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:18:33.014 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:18:33.015 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.015 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:18:33.016 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:18:33.016 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:18:33.016 +02:00 [DBG] Authorization was successful.
2025-06-29 01:18:33.016 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.016 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:18:33.016 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:18:33.016 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:18:33.017 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:18:33.017 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:18:33.017 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:18:33.017 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:33.017 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:33.018 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:18:33.018 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0089ms.
2025-06-29 01:18:33.018 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:18:33.018 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:18:33.018 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:18:33.018 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:18:33.018 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:18:33.018 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:18:33.018 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.0362ms
2025-06-29 01:18:33.018 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.018 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 2.8375 ms
2025-06-29 01:18:33.018 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" completed keep alive response.
2025-06-29 01:18:33.018 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 4.2392ms
2025-06-29 01:18:33.946 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:18:33.946 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:18:33.946 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:18:33.946 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.947 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:18:33.947 +02:00 [DBG] Successfully validated the token.
2025-06-29 01:18:33.947 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 01:18:33.947 +02:00 [DBG] Authorization was successful.
2025-06-29 01:18:33.947 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.947 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 01:18:33.947 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 01:18:33.947 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 01:18:33.947 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 01:18:33.948 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 01:18:33.948 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 01:18:33.948 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:33.948 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 01:18:33.948 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 01:18:33.948 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0093ms.
2025-06-29 01:18:33.949 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 01:18:33.949 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 01:18:33.949 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 01:18:33.949 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 01:18:33.949 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 01:18:33.949 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 01:18:33.949 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 0.7713ms
2025-06-29 01:18:33.949 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:18:33.949 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 2.1741 ms
2025-06-29 01:18:33.949 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" completed keep alive response.
2025-06-29 01:18:33.949 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 3.0911ms
2025-06-29 01:19:26.913 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" disconnecting.
2025-06-29 01:19:26.916 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" stopped.
2025-06-29 01:19:26.917 +02:00 [DBG] Connection id "0HNDMJ6O60EAU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:20:45.018 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" disconnecting.
2025-06-29 01:20:45.021 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" stopped.
2025-06-29 01:20:45.022 +02:00 [DBG] Connection id "0HNDMJ6O60EB0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:46:11.794 +02:00 [DBG] Connection id "0HNDMJ6O60EB1" received FIN.
2025-06-29 01:46:11.796 +02:00 [DBG] Connection id "0HNDMJ6O60EB1" accepted.
2025-06-29 01:46:11.797 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" accepted.
2025-06-29 01:46:11.797 +02:00 [DBG] Connection id "0HNDMJ6O60EB1" started.
2025-06-29 01:46:11.797 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" started.
2025-06-29 01:46:11.803 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 01:46:11.809 +02:00 [DBG] Connection id "0HNDMJ6O60EB1" stopped.
2025-06-29 01:46:11.809 +02:00 [DBG] Connection id "0HNDMJ6O60EB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 01:46:11.833 +02:00 [DBG] Connection 0HNDMJ6O60EB2 established using the following protocol: "Tls12"
2025-06-29 01:46:11.835 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 01:46:11.835 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 01:46:11.835 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 01:46:11.835 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 01:46:11.836 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 01:46:11.838 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:16:55', Current time (UTC): '28/06/2025 23:46:11'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 01:46:11.839 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:16:55', Current time (UTC): '28/06/2025 23:46:11'.
2025-06-29 01:46:11.841 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-06-29 01:46:11.841 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-29 01:46:11.841 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-29 01:46:11.842 +02:00 [INF] HTTP GET /api/Auth/secret responded 401 in 5.2682 ms
2025-06-29 01:46:11.842 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" completed keep alive response.
2025-06-29 01:46:11.842 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 401 0 null 7.0514ms
2025-06-29 01:48:22.961 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" disconnecting.
2025-06-29 01:48:22.964 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" stopped.
2025-06-29 01:48:22.965 +02:00 [DBG] Connection id "0HNDMJ6O60EB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 02:13:27.209 +02:00 [INF] Application is shutting down...
2025-06-29 02:13:27.213 +02:00 [DBG] Hosting stopping
2025-06-29 02:13:27.241 +02:00 [DBG] Hosting stopped
2025-06-29 22:40:15.392 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 22:40:15.501 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 22:40:15.902 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 22:40:15.964 +02:00 [DBG] Creating DbConnection.
2025-06-29 22:40:15.987 +02:00 [DBG] Created DbConnection. (21ms).
2025-06-29 22:40:15.989 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:15.991 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.201 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.204 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:40:16.207 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-29 22:40:16.208 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2025-06-29 22:40:16.211 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:40:16.242 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:40:16.244 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.249 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (2ms).
2025-06-29 22:40:16.249 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.250 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.251 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 22:40:16.252 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:40:16.252 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.252 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.252 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 22:40:16.277 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 22:40:16.311 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 22:40:16.317 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 22:40:16.318 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:40:16.318 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:40:16.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:40:16.318 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 22:40:16.324 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 22:40:16.325 +02:00 [DBG] Committing transaction.
2025-06-29 22:40:16.328 +02:00 [DBG] Committed transaction.
2025-06-29 22:40:16.329 +02:00 [DBG] Disposing transaction.
2025-06-29 22:40:16.330 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 22:40:16.332 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 22:40:16.333 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:40:16.333 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:40:16.333 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:40:16.333 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:40:16.335 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:40:16.335 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:40:16.335 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 22:40:16.338 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 22:40:16.339 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 22:40:16.339 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:40:16.339 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:40:16.339 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 22:40:16.363 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 22:40:16.364 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.365 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 22:40:16.367 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-29 22:40:16.367 +02:00 [DBG] Committing transaction.
2025-06-29 22:40:16.370 +02:00 [DBG] Committed transaction.
2025-06-29 22:40:16.371 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:40:16.371 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.371 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:40:16.371 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 22:40:16.376 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 22:40:16.376 +02:00 [DBG] Disposing transaction.
2025-06-29 22:40:16.376 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:16.376 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 22:40:16.378 +02:00 [DBG] Hosting starting
2025-06-29 22:40:16.384 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 22:40:16.391 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 22:40:16.392 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 22:40:16.392 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 22:40:16.392 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 22:40:16.395 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 22:40:16.397 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 22:40:16.397 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 22:40:16.397 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 22:40:16.400 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 22:40:16.401 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 22:40:16.402 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 22:40:16.402 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 22:40:16.402 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 22:40:16.402 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 22:40:16.452 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 22:40:16.452 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 22:40:16.728 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 22:40:16.728 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 22:40:16.728 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 22:40:16.729 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 22:40:16.729 +02:00 [INF] Hosting environment: Development
2025-06-29 22:40:16.729 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 22:40:16.729 +02:00 [DBG] Hosting started
2025-06-29 22:40:29.048 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" accepted.
2025-06-29 22:40:29.049 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" started.
2025-06-29 22:40:29.113 +02:00 [DBG] Connection 0HNDN9KNKRTL7 established using the following protocol: "Tls12"
2025-06-29 22:40:29.142 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7010/swagger/v1/swagger.json - null null
2025-06-29 22:40:29.153 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-29 22:40:29.153 +02:00 [DBG] Request did not match any endpoints
2025-06-29 22:40:29.171 +02:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-29 22:40:29.172 +02:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-06-29 22:40:29.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7010/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 105.48ms
2025-06-29 22:40:29.254 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" received FIN.
2025-06-29 22:40:29.255 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" is closed. The last processed stream ID was 1.
2025-06-29 22:40:29.255 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:40:29.258 +02:00 [DBG] The connection queue processing loop for 0HNDN9KNKRTL7 completed.
2025-06-29 22:40:29.260 +02:00 [DBG] Connection id "0HNDN9KNKRTL7" stopped.
2025-06-29 22:40:40.466 +02:00 [DBG] Connection id "0HNDN9KNKRTL8" received FIN.
2025-06-29 22:40:40.475 +02:00 [DBG] Connection id "0HNDN9KNKRTL8" accepted.
2025-06-29 22:40:40.476 +02:00 [DBG] Connection id "0HNDN9KNKRTL8" started.
2025-06-29 22:40:40.476 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" accepted.
2025-06-29 22:40:40.476 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" started.
2025-06-29 22:40:40.480 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 22:40:40.487 +02:00 [DBG] Connection id "0HNDN9KNKRTL8" stopped.
2025-06-29 22:40:40.487 +02:00 [DBG] Connection id "0HNDN9KNKRTL8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:40:40.505 +02:00 [DBG] Connection 0HNDN9KNKRTL9 established using the following protocol: "Tls12"
2025-06-29 22:40:40.513 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/login - application/json 53
2025-06-29 22:40:40.525 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-06-29 22:40:40.526 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-06-29 22:40:40.527 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 22:40:40.530 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:40:40.595 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:16:55', Current time (UTC): '29/06/2025 20:40:40'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 22:40:40.597 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28/06/2025 23:16:55', Current time (UTC): '29/06/2025 20:40:40'.
2025-06-29 22:40:40.599 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 22:40:40.612 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AuthApi.Models.LoginDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:40:40.613 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:40:40.613 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:40:40.613 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:40:40.613 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:40:40.613 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:40:40.614 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:40:40.616 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:40:40.619 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 22:40:40.620 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto' using the name '' in request data ...
2025-06-29 22:40:40.621 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-29 22:40:40.642 +02:00 [DBG] Connection id "0HNDN9KNKRTL9", Request id "0HNDN9KNKRTL9:00000001": started reading request body.
2025-06-29 22:40:40.642 +02:00 [DBG] Connection id "0HNDN9KNKRTL9", Request id "0HNDN9KNKRTL9:00000001": done reading request body.
2025-06-29 22:40:40.655 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'AuthApi.Models.LoginDto'
2025-06-29 22:40:40.655 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 22:40:40.655 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 22:40:40.655 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto' ...
2025-06-29 22:40:40.658 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'AuthApi.Models.LoginDto'.
2025-06-29 22:40:40.662 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Login (AuthApi) - Validation state: "Valid"
2025-06-29 22:40:40.705 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 22:40:40.745 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.Username == __username_0)'
2025-06-29 22:40:40.918 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 1], [Property: User.PasswordHash (byte[]) Required, 2], [Property: User.PasswordSalt (byte[]) Required, 3], [Property: User.Role (string) Required, 4], [Property: User.Username (string) Required Index MaxLength(50), 5] }
            SELECT TOP(2) u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM Users AS u
            WHERE u.Username == @__username_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(1);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(2);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(3);
                                    instance.<Role>k__BackingField = dataReader.GetString(4);
                                    instance.<Username>k__BackingField = dataReader.GetString(5);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 22:40:40.953 +02:00 [DBG] Creating DbConnection.
2025-06-29 22:40:40.953 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 22:40:40.955 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:40.957 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:40.957 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 22:40:40.957 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:40:40.962 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-06-29 22:40:40.964 +02:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 22:40:41.004 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-06-29 22:40:41.032 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:40:41.048 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.048 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 43ms reading results.
2025-06-29 22:40:41.049 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.050 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 22:40:41.073 +02:00 [DBG] 'DataContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:40:41.094 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:40:41.102 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:40:41.105 +02:00 [DBG] SaveChanges starting for 'DataContext'.
2025-06-29 22:40:41.107 +02:00 [DBG] DetectChanges starting for 'DataContext'.
2025-06-29 22:40:41.119 +02:00 [DBG] DetectChanges completed for 'DataContext'.
2025-06-29 22:40:41.169 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.169 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.171 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 22:40:41.171 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:40:41.172 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:40:41.172 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 22:40:41.189 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Created], [Expires], [Revoked], [RevokedByIp], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-29 22:40:41.197 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-29 22:40:41.200 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.200 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 11ms reading results.
2025-06-29 22:40:41.201 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.201 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 22:40:41.208 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:40:41.210 +02:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2025-06-29 22:40:41.227 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.Login (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 561.8357ms.
2025-06-29 22:40:41.231 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:40:41.233 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:40:41.233 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:40:41.233 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:40:41.233 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-29 22:40:41.233 +02:00 [INF] Executing OkObjectResult, writing value of type 'AuthApi.Models.TokenDto'.
2025-06-29 22:40:41.250 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Login (AuthApi) in 633.417ms
2025-06-29 22:40:41.251 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Login (AuthApi)'
2025-06-29 22:40:41.255 +02:00 [INF] HTTP POST /api/Auth/login responded 200 in 721.9662 ms
2025-06-29 22:40:41.257 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" completed keep alive response.
2025-06-29 22:40:41.260 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 22:40:41.264 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:40:41.266 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-29 22:40:41.267 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/login - 200 null application/json; charset=utf-8 753.951ms
2025-06-29 22:40:58.955 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:40:58.957 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:40:58.959 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:40:58.960 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:40:58.963 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:40:58.971 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:40:58.972 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:40:58.977 +02:00 [DBG] Authorization was successful.
2025-06-29 22:40:58.978 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:40:58.981 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:40:58.981 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:40:58.981 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:40:58.981 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:40:58.981 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:40:58.981 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:40:58.981 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:40:58.986 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:40:58.987 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:40:58.988 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.4098ms.
2025-06-29 22:40:58.989 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:40:58.989 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:40:58.990 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:40:58.990 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:40:58.990 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:40:58.990 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:40:58.994 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 11.9565ms
2025-06-29 22:40:58.995 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:40:58.995 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 31.6832 ms
2025-06-29 22:40:58.996 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" completed keep alive response.
2025-06-29 22:40:58.998 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 43.306ms
2025-06-29 22:42:55.979 +02:00 [DBG] Connection id "0HNDN9KNKRTLA" received FIN.
2025-06-29 22:42:55.981 +02:00 [DBG] Connection id "0HNDN9KNKRTLA" accepted.
2025-06-29 22:42:55.981 +02:00 [DBG] Connection id "0HNDN9KNKRTLA" started.
2025-06-29 22:42:55.982 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" accepted.
2025-06-29 22:42:55.982 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" started.
2025-06-29 22:42:55.984 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 22:42:55.985 +02:00 [DBG] Connection id "0HNDN9KNKRTLA" stopped.
2025-06-29 22:42:55.985 +02:00 [DBG] Connection id "0HNDN9KNKRTLA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:42:56.010 +02:00 [DBG] Connection 0HNDN9KNKRTLB established using the following protocol: "Tls12"
2025-06-29 22:42:56.012 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:42:56.012 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:42:56.012 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:42:56.013 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:56.013 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:42:56.016 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:42:56.016 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:42:56.018 +02:00 [DBG] Authorization was successful.
2025-06-29 22:42:56.018 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:56.019 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:42:56.019 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:42:56.019 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:42:56.019 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:42:56.019 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:42:56.019 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:42:56.019 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:42:56.021 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:42:56.022 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:42:56.022 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1289ms.
2025-06-29 22:42:56.023 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:42:56.024 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:42:56.024 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:42:56.024 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:42:56.024 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:42:56.024 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:42:56.027 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 7.7096ms
2025-06-29 22:42:56.027 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:56.027 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 14.0409 ms
2025-06-29 22:42:56.028 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:42:56.028 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 16.1495ms
2025-06-29 22:42:57.821 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:42:57.821 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:42:57.821 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:42:57.822 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:57.823 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:42:57.823 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:42:57.823 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:42:57.826 +02:00 [DBG] Authorization was successful.
2025-06-29 22:42:57.826 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:57.827 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:42:57.827 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:42:57.827 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:42:57.827 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:42:57.827 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:42:57.827 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:42:57.827 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:42:57.828 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:42:57.828 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:42:57.828 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0186ms.
2025-06-29 22:42:57.828 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:42:57.828 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:42:57.828 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:42:57.828 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:42:57.828 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:42:57.828 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:42:57.829 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 1.1772ms
2025-06-29 22:42:57.829 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:42:57.829 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 6.0381 ms
2025-06-29 22:42:57.829 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:42:57.829 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 7.8212ms
2025-06-29 22:43:09.666 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" disconnecting.
2025-06-29 22:43:09.667 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" stopped.
2025-06-29 22:43:09.667 +02:00 [DBG] Connection id "0HNDN9KNKRTL9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:43:18.202 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:43:18.203 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:43:18.203 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:43:18.203 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:18.204 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:43:18.205 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:43:18.206 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:43:18.206 +02:00 [DBG] Authorization was successful.
2025-06-29 22:43:18.206 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:18.207 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:43:18.207 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:43:18.208 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:43:18.208 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:43:18.208 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:43:18.208 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:43:18.208 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:43:18.211 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:43:18.212 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:43:18.213 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1614ms.
2025-06-29 22:43:18.214 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:43:18.214 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:43:18.214 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:43:18.214 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:43:18.214 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:43:18.214 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:43:18.214 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 6.3203ms
2025-06-29 22:43:18.214 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:18.215 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 10.5841 ms
2025-06-29 22:43:18.215 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:43:18.215 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 13.4082ms
2025-06-29 22:43:26.809 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:43:26.811 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:43:26.811 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:43:26.811 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:26.812 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:43:26.814 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:43:26.814 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:43:26.814 +02:00 [DBG] Authorization was successful.
2025-06-29 22:43:26.815 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:26.815 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:43:26.815 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:43:26.815 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:43:26.815 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:43:26.815 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:43:26.816 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:43:26.816 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:43:26.817 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:43:26.818 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:43:26.818 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0652ms.
2025-06-29 22:43:26.818 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:43:26.818 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:43:26.818 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:43:26.818 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:43:26.818 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:43:26.819 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:43:26.819 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.2108ms
2025-06-29 22:43:26.819 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:43:26.819 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 6.7861 ms
2025-06-29 22:43:26.819 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:43:26.819 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 10.6032ms
2025-06-29 22:43:53.144 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - null null
2025-06-29 22:43:53.144 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/admin-data'
2025-06-29 22:43:53.144 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)' with route pattern 'api/Auth/admin-data' is valid for the request path '/api/Auth/admin-data'
2025-06-29 22:43:53.145 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)'
2025-06-29 22:43:53.149 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:43:53.160 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:43:53.160 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:43:53.163 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-06-29 22:43:53.166 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-06-29 22:43:53.166 +02:00 [INF] HTTP GET /api/Auth/admin-data responded 403 in 16.9608 ms
2025-06-29 22:43:53.167 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:43:53.167 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - 403 0 null 24.3083ms
2025-06-29 22:44:11.641 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:44:11.642 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:44:11.642 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:44:11.642 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:11.643 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:44:11.645 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:44:11.645 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:44:11.646 +02:00 [DBG] Authorization was successful.
2025-06-29 22:44:11.647 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:11.648 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:44:11.648 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:44:11.648 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:44:11.648 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:44:11.648 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:44:11.648 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:44:11.648 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:11.649 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:11.650 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:44:11.650 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1145ms.
2025-06-29 22:44:11.650 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:44:11.650 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:44:11.650 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:44:11.651 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:44:11.651 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:44:11.651 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-29 22:44:11.651 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.1346ms
2025-06-29 22:44:11.651 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:11.652 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 8.2017 ms
2025-06-29 22:44:11.652 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" completed keep alive response.
2025-06-29 22:44:11.653 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 12.4875ms
2025-06-29 22:44:32.626 +02:00 [INF] Application is shutting down...
2025-06-29 22:44:32.631 +02:00 [DBG] Hosting stopping
2025-06-29 22:44:32.643 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" disconnecting.
2025-06-29 22:44:32.644 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" stopped.
2025-06-29 22:44:32.644 +02:00 [DBG] Connection id "0HNDN9KNKRTLB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:44:32.650 +02:00 [DBG] Hosting stopped
2025-06-29 22:44:36.855 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-29 22:44:36.962 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-29 22:44:37.313 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 22:44:37.366 +02:00 [DBG] Creating DbConnection.
2025-06-29 22:44:37.386 +02:00 [DBG] Created DbConnection. (18ms).
2025-06-29 22:44:37.388 +02:00 [DBG] Migrating using database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.390 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.562 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.565 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:44:37.568 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-06-29 22:44:37.568 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-06-29 22:44:37.571 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:44:37.600 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:44:37.602 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.607 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (2ms).
2025-06-29 22:44:37.607 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.608 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.608 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-29 22:44:37.610 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:44:37.610 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.610 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 22:44:37.624 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-29 22:44:37.660 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 22:44:37.664 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 22:44:37.665 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:44:37.665 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:44:37.665 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:44:37.665 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 22:44:37.669 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-29 22:44:37.670 +02:00 [DBG] Committing transaction.
2025-06-29 22:44:37.672 +02:00 [DBG] Committed transaction.
2025-06-29 22:44:37.672 +02:00 [DBG] Disposing transaction.
2025-06-29 22:44:37.673 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-29 22:44:37.674 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-29 22:44:37.675 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-29 22:44:37.675 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:44:37.675 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-29 22:44:37.675 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:44:37.676 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-29 22:44:37.676 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:44:37.676 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.677 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.677 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 22:44:37.678 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-29 22:44:37.679 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 22:44:37.679 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:44:37.679 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:44:37.679 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 22:44:37.683 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-29 22:44:37.685 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.685 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 1ms reading results.
2025-06-29 22:44:37.688 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-06-29 22:44:37.688 +02:00 [DBG] Committing transaction.
2025-06-29 22:44:37.689 +02:00 [DBG] Committed transaction.
2025-06-29 22:44:37.690 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-29 22:44:37.690 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.690 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-29 22:44:37.690 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 22:44:37.702 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-29 22:44:37.702 +02:00 [DBG] Disposing transaction.
2025-06-29 22:44:37.702 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:37.703 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 22:44:37.707 +02:00 [DBG] Hosting starting
2025-06-29 22:44:37.712 +02:00 [INF] User profile is available. Using '/Users/roswell/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-29 22:44:37.717 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7c327822-6bf2-4ccf-81df-ef5392978bd8.xml'.
2025-06-29 22:44:37.718 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-0df7c9dd-7661-49c3-99ef-9ba8d3309e8c.xml'.
2025-06-29 22:44:37.718 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-7ac1136b-2533-4997-a668-f62a920e542f.xml'.
2025-06-29 22:44:37.719 +02:00 [DBG] Reading data from file '/Users/roswell/.aspnet/DataProtection-Keys/key-735279f5-4f5d-44c9-b810-0e2c44a149c8.xml'.
2025-06-29 22:44:37.721 +02:00 [DBG] Found key {7c327822-6bf2-4ccf-81df-ef5392978bd8}.
2025-06-29 22:44:37.722 +02:00 [DBG] Found key {0df7c9dd-7661-49c3-99ef-9ba8d3309e8c}.
2025-06-29 22:44:37.723 +02:00 [DBG] Found key {7ac1136b-2533-4997-a668-f62a920e542f}.
2025-06-29 22:44:37.723 +02:00 [DBG] Found key {735279f5-4f5d-44c9-b810-0e2c44a149c8}.
2025-06-29 22:44:37.726 +02:00 [DBG] Considering key {7ac1136b-2533-4997-a668-f62a920e542f} with expiration date 2025-09-26 22:52:20Z as default key.
2025-06-29 22:44:37.727 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=9.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-06-29 22:44:37.728 +02:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-06-29 22:44:37.728 +02:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-06-29 22:44:37.729 +02:00 [DBG] Using key {7ac1136b-2533-4997-a668-f62a920e542f} as the default key.
2025-06-29 22:44:37.729 +02:00 [DBG] Key ring with default key {7ac1136b-2533-4997-a668-f62a920e542f} was loaded during application startup.
2025-06-29 22:44:37.773 +02:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-06-29 22:44:37.773 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-29 22:44:38.051 +02:00 [INF] Now listening on: https://localhost:7010
2025-06-29 22:44:38.051 +02:00 [INF] Now listening on: http://localhost:5184
2025-06-29 22:44:38.051 +02:00 [DBG] Loaded hosting startup assembly AuthApi
2025-06-29 22:44:38.051 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-29 22:44:38.051 +02:00 [INF] Hosting environment: Development
2025-06-29 22:44:38.051 +02:00 [INF] Content root path: /Users/roswell/Projects/.net-core_API-Authentication/AuthApi
2025-06-29 22:44:38.051 +02:00 [DBG] Hosting started
2025-06-29 22:44:45.932 +02:00 [DBG] Connection id "0HNDN9N46M909" received FIN.
2025-06-29 22:44:45.937 +02:00 [DBG] Connection id "0HNDN9N46M909" accepted.
2025-06-29 22:44:45.938 +02:00 [DBG] Connection id "0HNDN9N46M909" started.
2025-06-29 22:44:45.939 +02:00 [DBG] Connection id "0HNDN9N46M90A" accepted.
2025-06-29 22:44:45.939 +02:00 [DBG] Connection id "0HNDN9N46M90A" started.
2025-06-29 22:44:45.943 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 22:44:45.952 +02:00 [DBG] Connection id "0HNDN9N46M909" stopped.
2025-06-29 22:44:45.953 +02:00 [DBG] Connection id "0HNDN9N46M909" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:44:45.974 +02:00 [DBG] Connection 0HNDN9N46M90A established using the following protocol: "Tls12"
2025-06-29 22:44:45.994 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:44:46.008 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:44:46.010 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:44:46.011 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:46.032 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:44:46.097 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:44:46.098 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:44:46.102 +02:00 [DBG] Authorization was successful.
2025-06-29 22:44:46.103 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:46.110 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:44:46.111 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:44:46.111 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:44:46.111 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:44:46.111 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:44:46.111 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:44:46.112 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:46.114 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:46.117 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:44:46.119 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.1945ms.
2025-06-29 22:44:46.124 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:44:46.126 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:44:46.126 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:44:46.126 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:44:46.126 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:44:46.126 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-06-29 22:44:46.132 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 18.4467ms
2025-06-29 22:44:46.133 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:46.134 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 100.1738 ms
2025-06-29 22:44:46.135 +02:00 [DBG] Connection id "0HNDN9N46M90A" completed keep alive response.
2025-06-29 22:44:46.141 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 147.6346ms
2025-06-29 22:44:47.560 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:44:47.561 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:44:47.561 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:44:47.562 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:47.562 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:44:47.564 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:44:47.564 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:44:47.564 +02:00 [DBG] Authorization was successful.
2025-06-29 22:44:47.565 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:47.565 +02:00 [INF] Route matched with {action = "GetSecret", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.String] GetSecret() on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:44:47.565 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:44:47.565 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:44:47.565 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:44:47.565 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:44:47.565 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:44:47.565 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:47.567 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:47.567 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.GetSecret (AuthApi) - Validation state: "Valid"
2025-06-29 22:44:47.567 +02:00 [INF] Executed action method AuthApi.Controllers.AuthController.GetSecret (AuthApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.0304ms.
2025-06-29 22:44:47.568 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-29 22:44:47.568 +02:00 [DBG] No information found on request to perform content negotiation.
2025-06-29 22:44:47.568 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-29 22:44:47.568 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-29 22:44:47.568 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-06-29 22:44:47.568 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-06-29 22:44:47.568 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.GetSecret (AuthApi) in 3.2203ms
2025-06-29 22:44:47.569 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:44:47.569 +02:00 [INF] HTTP GET /api/Auth/secret responded 200 in 6.0959 ms
2025-06-29 22:44:47.569 +02:00 [DBG] Connection id "0HNDN9N46M90A" completed keep alive response.
2025-06-29 22:44:47.569 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 200 null text/plain; charset=utf-8 8.6466ms
2025-06-29 22:44:50.405 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - null null
2025-06-29 22:44:50.406 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/admin-data'
2025-06-29 22:44:50.406 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)' with route pattern 'api/Auth/admin-data' is valid for the request path '/api/Auth/admin-data'
2025-06-29 22:44:50.406 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetAdminData (AuthApi)'
2025-06-29 22:44:50.408 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:44:50.410 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:44:50.410 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:44:50.412 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-06-29 22:44:50.413 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-06-29 22:44:50.413 +02:00 [INF] HTTP GET /api/Auth/admin-data responded 403 in 5.0386 ms
2025-06-29 22:44:50.413 +02:00 [DBG] Connection id "0HNDN9N46M90A" completed keep alive response.
2025-06-29 22:44:50.413 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/admin-data - 403 0 null 8.6107ms
2025-06-29 22:44:54.387 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - application/json 53
2025-06-29 22:44:54.388 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh'
2025-06-29 22:44:54.388 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)' with route pattern 'api/Auth/refresh' is valid for the request path '/api/Auth/refresh'
2025-06-29 22:44:54.388 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 22:44:54.388 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:44:54.389 +02:00 [DBG] Successfully validated the token.
2025-06-29 22:44:54.389 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-06-29 22:44:54.390 +02:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 22:44:54.400 +02:00 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(System.String) on controller AuthApi.Controllers.AuthController (AuthApi).
2025-06-29 22:44:54.400 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-29 22:44:54.400 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-29 22:44:54.400 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-29 22:44:54.400 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-29 22:44:54.400 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-29 22:44:54.400 +02:00 [DBG] Executing controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:54.404 +02:00 [DBG] Executed controller factory for controller AuthApi.Controllers.AuthController (AuthApi)
2025-06-29 22:44:54.410 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' ...
2025-06-29 22:44:54.411 +02:00 [DBG] Attempting to bind parameter 'refreshToken' of type 'System.String' using the name 'refreshToken' in request data ...
2025-06-29 22:44:54.412 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 22:44:54.412 +02:00 [DBG] Done attempting to bind parameter 'refreshToken' of type 'System.String'.
2025-06-29 22:44:54.413 +02:00 [DBG] Attempting to validate the bound parameter 'refreshToken' of type 'System.String' ...
2025-06-29 22:44:54.415 +02:00 [DBG] Done attempting to validate the bound parameter 'refreshToken' of type 'System.String'.
2025-06-29 22:44:54.416 +02:00 [INF] Executing action method AuthApi.Controllers.AuthController.Refresh (AuthApi) - Validation state: "Valid"
2025-06-29 22:44:54.439 +02:00 [DBG] Entity Framework Core 9.0.6 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-29 22:44:54.491 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Include(x => x.User)
    .SingleOrDefault(rt => rt.Token == __token_0)'
2025-06-29 22:44:54.533 +02:00 [DBG] Including navigation: 'RefreshToken.User'.
2025-06-29 22:44:54.692 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<RefreshToken>(
    asyncEnumerable: SingleQueryingEnumerable.Create<RefreshToken>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.Expires (DateTime) Required, 2], [Property: RefreshToken.Revoked (DateTime?), 3], [Property: RefreshToken.RevokedByIp (string), 4], [Property: RefreshToken.Token (string) Required Index MaxLength(256), 5], [Property: RefreshToken.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 8], [Property: User.PasswordHash (byte[]) Required, 9], [Property: User.PasswordSalt (byte[]) Required, 10], [Property: User.Role (string) Required, 11], [Property: User.Username (string) Required Index MaxLength(50), 12] }
            SELECT TOP(2) r.Id, r.Created, r.Expires, r.Revoked, r.RevokedByIp, r.Token, r.UserId, u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM RefreshTokens AS r
            INNER JOIN Users AS u ON r.UserId == u.Id
            WHERE r.Token == @__token_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.Created (DateTime) Required, 1], [Property: RefreshToken.Expires (DateTime) Required, 2], [Property: RefreshToken.Revoked (DateTime?), 3], [Property: RefreshToken.RevokedByIp (string), 4], [Property: RefreshToken.Token (string) Required Index MaxLength(256), 5], [Property: RefreshToken.UserId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: User.IsBlocked (bool) Required ValueGenerated.OnAdd, 8], [Property: User.PasswordHash (byte[]) Required, 9], [Property: User.PasswordSalt (byte[]) Required, 10], [Property: User.Role (string) Required, 11], [Property: User.Username (string) Required Index MaxLength(50), 12] }
            SELECT TOP(2) r.Id, r.Created, r.Expires, r.Revoked, r.RevokedByIp, r.Token, r.UserId, u.Id, u.IsBlocked, u.PasswordHash, u.PasswordSalt, u.Role, u.Username
            FROM RefreshTokens AS r
            INNER JOIN Users AS u ON r.UserId == u.Id
            WHERE r.Token == @__token_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            RefreshToken entity;
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                RefreshToken instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(RefreshToken);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: RefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (RefreshToken)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")]: 
                            {
                                return 
                                {
                                    RefreshToken instance;
                                    instance = new RefreshToken();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Created>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<Expires>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Revoked>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<RevokedByIp>k__BackingField = dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4);
                                    instance.<Token>k__BackingField = dataReader.GetString(5);
                                    instance.<UserId>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: RefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(RefreshToken)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            entity = 
            {
                MaterializationContext materializationContext2;
                IEntityType entityType2;
                User instance2;
                InternalEntityEntry entry2;
                bool hasNullKey2;
                materializationContext2 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance2 = default(User);
                entry2 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(7) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey2);
                !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                {
                    entityType2 = entry2.EntityType;
                    return instance2 = (User)entry2.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot2;
                    shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType2 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("AuthApi.Models.User")];
                    instance2 = switch (entityType2)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(7);
                                    instance.<IsBlocked>k__BackingField = dataReader.GetBoolean(8);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetFieldValue<byte[]>(9);
                                    instance.<PasswordSalt>k__BackingField = dataReader.GetFieldValue<byte[]>(10);
                                    instance.<Role>k__BackingField = dataReader.GetString(11);
                                    instance.<Username>k__BackingField = dataReader.GetString(12);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext2.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("AuthApi.Models.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType2, 
                        entity: instance2, 
                        snapshot: shadowSnapshot2);
                    return instance2;
                } : default(void);
                return instance2;
            };
            ShaperProcessingExpressionVisitor.IncludeReference<RefreshToken, RefreshToken, User>(
                queryContext: queryContext, 
                entity: entity, 
                relatedEntity: entity, 
                navigation: [LIFTABLE Constant: Navigation: RefreshToken.User (User) ToPrincipal User Inverse: RefreshTokens | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("AuthApi.Models.RefreshToken").FindNavigation("User")], 
                inverseNavigation: [LIFTABLE Constant: Navigation: User.RefreshTokens (List<RefreshToken>) Collection ToDependent RefreshToken Inverse: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindNavigation("RefreshTokens")], 
                fixup: (namelessParameter{8}, namelessParameter{9}) => 
                {
                    namelessParameter{8}.<User>k__BackingField = namelessParameter{9};
                    return [LIFTABLE Constant: ClrICollectionAccessor<User, List<RefreshToken>, RefreshToken> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("AuthApi.Models.User").FindNavigation("RefreshTokens").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{8}, 
                        forMaterialization: True);
                }, 
                trackingQuery: True);
            return entity;
        }, 
        contextType: AuthApi.Data.DataContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-29 22:44:54.724 +02:00 [DBG] Creating DbConnection.
2025-06-29 22:44:54.725 +02:00 [DBG] Created DbConnection. (0ms).
2025-06-29 22:44:54.726 +02:00 [DBG] Opening connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:54.728 +02:00 [DBG] Opened connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:54.728 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-29 22:44:54.728 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-29 22:44:54.732 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-06-29 22:44:54.734 +02:00 [DBG] Executing DbCommand [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 22:44:54.771 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__token_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Created], [r].[Expires], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserId], [u].[Id], [u].[IsBlocked], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshTokens] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__token_0
2025-06-29 22:44:54.795 +02:00 [DBG] Context 'DataContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:44:54.820 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:44:54.823 +02:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-29 22:44:54.832 +02:00 [DBG] Closing data reader to 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:54.832 +02:00 [DBG] A data reader for 'AuthDb' on server 'localhost,1433' is being disposed after spending 61ms reading results.
2025-06-29 22:44:54.833 +02:00 [DBG] Closing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:54.833 +02:00 [DBG] Closed connection to database 'AuthDb' on server 'localhost,1433' (0ms).
2025-06-29 22:44:54.837 +02:00 [INF] Executed action AuthApi.Controllers.AuthController.Refresh (AuthApi) in 436.744ms
2025-06-29 22:44:54.838 +02:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Refresh (AuthApi)'
2025-06-29 22:44:54.839 +02:00 [WRN] Refresh token expired for /api/Auth/refresh
AuthApi.Exceptions.RefreshTokenExpiredException: Refresh token has expired.
   at AuthApi.Services.Implementations.AuthService.RefreshTokenAsync(String token, String ipAddress) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Services/Implementations/AuthService.cs:line 63
   at AuthApi.Controllers.AuthController.Refresh(String refreshToken) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Controllers/AuthController.cs:line 50
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at AuthApi.Middlewares.ExceptionLoggingMiddleware.InvokeAsync(HttpContext context) in /Users/roswell/Projects/.net-core_API-Authentication/AuthApi/Middlewares/ExceptionLoggingMiddleware.cs:line 22
2025-06-29 22:44:54.917 +02:00 [INF] HTTP POST /api/Auth/refresh responded 403 in 528.6120 ms
2025-06-29 22:44:54.923 +02:00 [DBG] Connection id "0HNDN9N46M90A" completed keep alive response.
2025-06-29 22:44:54.924 +02:00 [DBG] 'DataContext' disposed.
2025-06-29 22:44:54.928 +02:00 [DBG] Disposing connection to database 'AuthDb' on server 'localhost,1433'.
2025-06-29 22:44:54.930 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-29 22:44:54.930 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7010/api/Auth/refresh?refreshToken=W/Wy4N/pc9KjJSXesQcl1SmJN40OljLwM4IKnl0o3cUSSA/f8oEC3qLFfbJsgHtlW7BwadEOuxZaOJPxIwWj9g== - 403 null application/json; charset=utf-8 542.8483ms
2025-06-29 22:44:54.932 +02:00 [DBG] Connection id "0HNDN9N46M90A", Request id "0HNDN9N46M90A:00000004": started reading request body.
2025-06-29 22:44:54.932 +02:00 [DBG] Connection id "0HNDN9N46M90A", Request id "0HNDN9N46M90A:00000004": done reading request body.
2025-06-29 22:47:05.954 +02:00 [DBG] Connection id "0HNDN9N46M90A" disconnecting.
2025-06-29 22:47:05.956 +02:00 [DBG] Connection id "0HNDN9N46M90A" stopped.
2025-06-29 22:47:05.956 +02:00 [DBG] Connection id "0HNDN9N46M90A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:48:52.211 +02:00 [DBG] Connection id "0HNDN9N46M90B" received FIN.
2025-06-29 22:48:52.212 +02:00 [DBG] Connection id "0HNDN9N46M90B" accepted.
2025-06-29 22:48:52.212 +02:00 [DBG] Connection id "0HNDN9N46M90B" started.
2025-06-29 22:48:52.213 +02:00 [DBG] Connection id "0HNDN9N46M90C" accepted.
2025-06-29 22:48:52.213 +02:00 [DBG] Connection id "0HNDN9N46M90C" started.
2025-06-29 22:48:52.214 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-29 22:48:52.215 +02:00 [DBG] Connection id "0HNDN9N46M90B" stopped.
2025-06-29 22:48:52.215 +02:00 [DBG] Connection id "0HNDN9N46M90B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:48:52.237 +02:00 [DBG] Connection 0HNDN9N46M90C established using the following protocol: "Tls12"
2025-06-29 22:48:52.239 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7010/api/Auth/secret - null null
2025-06-29 22:48:52.239 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/secret'
2025-06-29 22:48:52.239 +02:00 [DBG] Endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)' with route pattern 'api/Auth/secret' is valid for the request path '/api/Auth/secret'
2025-06-29 22:48:52.239 +02:00 [DBG] Request matched endpoint 'AuthApi.Controllers.AuthController.GetSecret (AuthApi)'
2025-06-29 22:48:52.240 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-29 22:48:52.244 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/06/2025 20:41:41', Current time (UTC): '29/06/2025 20:48:52'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-29 22:48:52.246 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29/06/2025 20:41:41', Current time (UTC): '29/06/2025 20:48:52'.
2025-06-29 22:48:52.247 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-06-29 22:48:52.247 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-29 22:48:52.252 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-29 22:48:52.253 +02:00 [INF] HTTP GET /api/Auth/secret responded 401 in 12.4223 ms
2025-06-29 22:48:52.253 +02:00 [DBG] Connection id "0HNDN9N46M90C" completed keep alive response.
2025-06-29 22:48:52.253 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7010/api/Auth/secret - 401 0 null 14.181ms
2025-06-29 22:49:23.462 +02:00 [INF] Application is shutting down...
2025-06-29 22:49:23.464 +02:00 [DBG] Hosting stopping
2025-06-29 22:49:23.478 +02:00 [DBG] Connection id "0HNDN9N46M90C" disconnecting.
2025-06-29 22:49:23.478 +02:00 [DBG] Connection id "0HNDN9N46M90C" stopped.
2025-06-29 22:49:23.478 +02:00 [DBG] Connection id "0HNDN9N46M90C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-29 22:49:23.482 +02:00 [DBG] Hosting stopped
